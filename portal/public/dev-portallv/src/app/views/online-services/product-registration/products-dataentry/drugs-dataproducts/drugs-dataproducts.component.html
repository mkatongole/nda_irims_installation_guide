<div * ngIf= "product_type_id ==1 || product_type_id ==2" style="min-height: 35px;text-align:left; margin-top: 10px;padding-top: 5px; font-weight: bold;">
  <h5 class="strong">Product Information Details(Fill all the information on the Tabs)</h5>
</div>

<div class="accordion" id="productInfo">
  <div class="card">
    <div class="card-headerdefined" id="headingTwo">

      <button class="btn btn-link " type="button" data-toggle="collapse" data-target="#product_ingredients"
        aria-expanded="false" aria-controls="product_ingredients">
        Product Ingredients(expand to fill in the product Ingredients)
      </button>
    </div>
    <div id="product_ingredients" class="collapse show" aria-labelledby="headingTwo" data-parent="#productInfo">
      <div class="card-body no-padding">
        <div class="no-padding">
          <dx-data-grid class="table row-border hover"  [allowColumnResizing]="true"  [columnHidingEnabled]="false" (onToolbarPreparing)="onProdIngredientsPreparing($event)"
            [dataSource]="drugsingredientsData" keyExpr="id">
            <dxo-filter-row [visible]="false"></dxo-filter-row>
            <dxo-search-panel [visible]="true">
            </dxo-search-panel>
            <dxo-paging [enabled]="true">
            </dxo-paging>
            <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
            </dxo-pager>
            <dxo-export [enabled]="true" fileName="ingredientsFile" [allowExportSelectedData]="true"></dxo-export>
            <dxo-group-panel [visible]="true"></dxo-group-panel>
            <dxi-column [width]="200" caption="Action" name="command-editing" [allowFiltering]="false"
              [allowSorting]="false" cellTemplate="cellTemplate">
              <div *dxTemplate="let data of 'cellTemplate'">
                <dx-button text="Edit" (click)="funcEditIngredientsDetails(data)" 
                  type="success" icon="edit">
                </dx-button> 
                <dx-button text="Delete" (click)="funcDeleteIngredientsDetails(data)" 
                  type="danger" icon="delete">
                </dx-button> 
              </div>
            </dxi-column>
            <dxi-column *ngIf="product_type_id == 3" dataField="generic_name" [groupIndex]="1" [allowEditing]="false" caption="Generic Name"></dxi-column>

            <dxi-column dataField="ingredient"></dxi-column>
            <dxi-column dataField="specification"></dxi-column>
            <dxi-column dataField="strength"></dxi-column>
            <dxi-column dataField="si_units"></dxi-column>
            <dxi-column dataField="reason_of_inclusion"></dxi-column>
          </dx-data-grid>
        </div>
      </div>
    </div>
  </div>
<!--   <div class="card">
    <div class="card-header" id="headingThree">

      <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#packaging_information"
        aria-expanded="false" aria-controls="packaging_information">
        Primary Packaging Information(expand to fill in the product packaging)
      </button>

    </div>
    <div id="packaging_information" class="collapse" aria-labelledby="headingThree" data-parent="#productInfo">
      <div class="card-body no-padding">

        <div class="no-padding">
          <dx-data-grid class="table row-border hover"  [allowColumnResizing]="true"  [columnHidingEnabled]="false" (onToolbarPreparing)="onProdPackagingPreparing($event)"
            [dataSource]="drugsPackagingData" keyExpr="id">
            <dxo-filter-row [visible]="false"></dxo-filter-row>
            <dxo-search-panel [visible]="true">
            </dxo-search-panel>
            <dxo-paging [enabled]="true">
            </dxo-paging>
            <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
            </dxo-pager>
            <dxo-export [enabled]="true" fileName="packagingFile" [allowExportSelectedData]="true"></dxo-export>
            <dxo-group-panel [visible]="true"></dxo-group-panel>
            <dxi-column  [width]="200" caption="Action" name="command-editing" [allowFiltering]="false"
              [allowSorting]="false" cellTemplate="cellTemplate">
              <div *dxTemplate="let data of 'cellTemplate'">
               
                    <dx-button text="Edit" (click)="funcEditPackagingDetails(data)" 
                      type="success" icon="edit">
                      </dx-button> 
                  <dx-button text="Delete" (click)="funcDeletePackDetails(data)" 
                      type="danger" icon="delete">
                  </dx-button> 
              </div>
            </dxi-column>
            <dxi-column dataField="container_type"></dxi-column>
            <dxi-column dataField="primary_container" caption ="Container"></dxi-column>
            <dxi-column dataField="container_materials"></dxi-column>
            <dxi-column dataField="no_of_units"></dxi-column>
            <dxi-column dataField="no_of_packs"></dxi-column>
            <dxi-column dataField="si_units"></dxi-column>

          </dx-data-grid>
        </div>
      </div>
    </div>
  </div> -->

  <div class="card">
    <div class="card-header" id="headingThree">
      <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#product_manufacturers"
        aria-expanded="false" aria-controls="packaging_information">
       Finished Product Manufacturers(expand to fill in the finished manufacturers)
      </button>
    </div>
    <div id="product_manufacturers" class="collapse" aria-labelledby="headingThree" data-parent="#productInfo">
      <div class="card-body no-padding">
        <div class="no-padding">
          <dx-data-grid class="table row-border hover"  [allowColumnResizing]="true"  [columnHidingEnabled]="false" (onToolbarPreparing)="onProdManufacturingPreparing($event)"
            [dataSource]="productManufacturersData" keyExpr="id">
            <dxo-filter-row [visible]="false"></dxo-filter-row>
            <dxo-search-panel [visible]="true">
            </dxo-search-panel>
            <dxo-paging [enabled]="true">
            </dxo-paging>
            <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
            </dxo-pager>
            <dxo-export [enabled]="true" fileName="manufacturingFile" [allowExportSelectedData]="true"></dxo-export>

            
            <dxo-group-panel [visible]="true"></dxo-group-panel>
            <dxi-column [width]="130" caption="Action" name="command-editing" [allowFiltering]="false"
            [allowSorting]="false" cellTemplate="cellTemplate">
            <div *dxTemplate="let data of 'cellTemplate'">
                
              <dx-button text="Delete" (click)="funcDeleteManufacturingDetails(data)" 
                  type="danger" icon="delete">
              </dx-button> 
            </div>
          </dxi-column>
            <dxi-column *ngIf="product_type_id == 3" dataField="generic_name" [groupIndex]="1" [allowEditing]="false" caption="Generic Name"></dxi-column>
            <dxi-column dataField="manufacturing_site_number"caption="Manufacturing site Number"></dxi-column>
            <dxi-column dataField="gmp_certificate_no"caption="GMP Certificate number"></dxi-column>
            <dxi-column dataField="manufacturer_name"caption="Manufacturing Site Name"></dxi-column>
            <dxi-column dataField="physical_address"></dxi-column>
            <dxi-column dataField="country"></dxi-column>
            <dxi-column dataField="manufacturing_role"></dxi-column>
            <dxi-column dataField="product_line"></dxi-column>
            <dxi-column dataField="gmp_status"></dxi-column>
          </dx-data-grid>
        </div>
      </div>
    </div>
  </div>
  <div class="card">
    <div class="card-header" id="headingFour">

      <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#api_manufacturers"
        aria-expanded="false" aria-controls="packaging_information">
        API Manufacturers(expand to fill in the API manufacturers)
      </button>

    </div>
    <div id="api_manufacturers" class="collapse" aria-labelledby="headingFour" data-parent="#productInfo">
      <div class="card-body no-padding">

        <div class='no-padding'>
          <dx-data-grid class="table row-border hover"  [allowColumnResizing]="true"  [columnHidingEnabled]="false" (onToolbarPreparing)="onProdApiManufacturingPreparing($event)"
            [dataSource]="apiManufacturersData" keyExpr="id">
            <dxo-filter-row [visible]="false"></dxo-filter-row>
            <dxo-search-panel [visible]="true">
            </dxo-search-panel>
            <dxo-paging [enabled]="true">
            </dxo-paging>
            <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
            </dxo-pager>
            <dxo-export [enabled]="true" fileName="manufacturingFile" [allowExportSelectedData]="true"></dxo-export>

            
            <dxo-group-panel [visible]="true"></dxo-group-panel>
            <dxi-column [width]="130" caption="Action" name="command-editing" [allowFiltering]="false"
            [allowSorting]="false" cellTemplate="cellTemplate">
            <div *dxTemplate="let data of 'cellTemplate'">
             
              <dx-button text="Delete" (click)="funcDeleteManufacturingDetails(data)" 
                  type="danger" icon="delete">
              </dx-button> 
            </div>
          </dxi-column>
            <dxi-column *ngIf="product_type_id == 3" dataField="generic_name" [groupIndex]="1" [allowEditing]="false" caption="Generic Name"></dxi-column>
            <dxi-column dataField="active_ingredient"></dxi-column>
            <dxi-column dataField="manufacturer_name"></dxi-column>
            <dxi-column dataField="country"></dxi-column>
            <dxi-column dataField="region"></dxi-column>
            <dxi-column dataField="physical_address"></dxi-column>
            <dxi-column dataField="postal_address"></dxi-column>
            <dxi-column dataField="email_address"></dxi-column>
          
          </dx-data-grid>
        </div>
      </div>
    </div>
  </div>
<div class="card" *ngIf="sub_module_id == 7">
  <div class="card-headerdefined" id="headingGmpInspections">

    <button class="btn btn-link " type="button" data-toggle="collapse" data-target="#other_gmpinspections"
      aria-expanded="false" aria-controls="other_gmpinspections">
      <i class="fa fa-arrow-down" aria-hidden="true"></i>
      GMP Inspections In other States/Countries(Optional)
    </button>
  </div>
  <div id="other_gmpinspections" class="collapse" aria-labelledby="headingGmpInspections" data-parent="#productInfo">
    <div class="card-body no-padding">
      <div class="no-padding">
        <div class='no-padding'>
          <dx-data-grid class="table row-border hover"  [allowColumnResizing]="true"   (onToolbarPreparing)="onOtherStatesGmpInspectionsPreparing($event)"
            [dataSource]="otherStatesGmpInspectionsData" keyExpr="id">
            <dxo-filter-row [visible]="false"></dxo-filter-row>
            <dxo-search-panel [visible]="true">
            </dxo-search-panel>
            <dxo-group-panel [visible]="true"></dxo-group-panel>
            <dxi-column  [width]="200"  caption="Action" name="command-editing" [allowFiltering]="false"
              [allowSorting]="false" cellTemplate="cellTemplate">
              <div *dxTemplate="let data of 'cellTemplate'">
                
                <dx-button
                text="Edit"
                type="success"
                icon="fa fa-edit"  [disabled]="isReadOnly"
                [elementAttr]="{  class: 'pull-left' }"
                (onClick)="funcEditOtherStatesGmpInspections(data)">
            </dx-button>
            <dx-button
            text="Del"
            type="danger"
            icon="fa fa-trash"  [disabled]="isReadOnly"
            [elementAttr]="{  class: 'pull-left' }"
            (onClick)="funcDelOtherStatesGmpInspections(data)">
        </dx-button>

              </div>
            </dxi-column>
            <dxi-column *ngIf="product_type_id == 3" dataField="generic_name" [groupIndex]="1" [allowEditing]="false" caption="Generic Name"></dxi-column>
            <dxi-column dataField="country" caption ="Country"></dxi-column>
            <dxi-column  dataField="application_reference" caption="GMP Inspection Certificate No"></dxi-column>
            <dxi-column  dataField="approving_authority" caption="Approving Authority "></dxi-column>
            <dxi-column  dataField="approval_date" caption="Approving Date "></dxi-column>
            <dxi-column dataField="inspection_date" caption="Inspection Date"></dxi-column>
            <dxi-column dataField="approved_productlines"caption="Approved Product Line"></dxi-column>
            <dxi-column  dataField="product_category" caption="Product Category"></dxi-column>
            <dxi-column dataField="manufacturing_activity" caption="Manufacturing Activity"></dxi-column>
          </dx-data-grid>
      </div>
    </div>
  </div>
</div>

<div   class="card" *ngIf="sub_module_id == 7">
<div class="card-headerdefined" id="headinrProductRegistrations">

  <button class="btn btn-link " type="button" data-toggle="collapse" data-target="#other_statesproductregistrations"
    aria-expanded="false" aria-controls="other_statesproductregistrations">
    <i class="fa fa-arrow-down" aria-hidden="true"></i>
     Product Registration (Marketing authorisation) status in other States/Countries(Optional)
  </button>
</div>
<div id="other_statesproductregistrations" class="collapse" aria-labelledby="headinrProductRegistrations" data-parent="#productInfo">
  <div class="card-body no-padding">
    <div class="no-padding">
      <dx-data-grid class="table row-border hover"  [allowColumnResizing]="true"   (onToolbarPreparing)="onProdStatesRegistrationsPreparing($event)"
      [dataSource]="prodStatesRegistrationsData" keyExpr="id">
      <dxo-filter-row [visible]="false"></dxo-filter-row>
      <dxo-search-panel [visible]="true">
      </dxo-search-panel>
  
      <dxo-group-panel [visible]="true"></dxo-group-panel>
      <dxi-column  [width]="200"  caption="Action" name="command-editing" [allowFiltering]="false"
        [allowSorting]="false" cellTemplate="cellTemplate">
        <div *dxTemplate="let data of 'cellTemplate'">
          
          <dx-button
          text="Edit"
          type="success"
          icon="fa fa-edit"  [disabled]="isReadOnly"
          [elementAttr]="{  class: 'pull-left btn-sm' }"
          (onClick)="funcEditOtherStatesRegistrations(data)">
      </dx-button>
      <dx-button
      text="Del"
      type="danger"
      icon="fa fa-trash"  [disabled]="isReadOnly"
      [elementAttr]="{  class: 'pull-left  btn-sm' }"
      (onClick)="funcDelOtherStatesRegistrations(data)">
  </dx-button>

        </div>
      </dxi-column>
      <dxi-column *ngIf="product_type_id == 3" dataField="generic_name" [groupIndex]="1" [allowEditing]="false" caption="Generic Name"></dxi-column>
      <dxi-column dataField="country" caption ="Country"></dxi-column>
      <dxi-column  dataField="registration_ref" caption="Registration(Application) no"></dxi-column>
      <dxi-column  dataField="approving_authority" caption="Approving Authority "></dxi-column>
      <dxi-column dataField="date_of_registration" caption="Date of Registration"></dxi-column>
      <dxi-column dataField="current_status" ></dxi-column>
    </dx-data-grid>
    </div>
  </div>
</div>
</div>
<dx-popup class="popup"  [width]="funcpopWidth(40)" 
  [height]="400" 
  [showTitle]="true" title="Product Ingredients Details" [dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="addproductIngredientsModal">
  <div *dxTemplate="let data of 'content'" >
    <form [formGroup]="addIngredientsdetailsfrm" class="col-lg-12  div-nopadding" 
      style="background: #fff;" enctype="multipart/form-data" role="form" (ngSubmit)="onSaveNewIngredients()">
      <div class="col-lg-12">
        <label class="control-label">Ingredient Name</label>
          <dx-text-box formControlName="name" placeholder="name" [showClearButton]="true">
          </dx-text-box>
      </div>
      <div class="col-lg-12">
        <label class="control-label">Description</label>
          <dx-text-area formControlName="description" placeholder="description" >
          </dx-text-area>
      </div>
      <input type='hidden' value='{{section_id}}' formControlName="section_id"/>
      <input type='hidden' value = 'par_ingredients_details' formControlName="tablename"/>
      <div class="col-lg-12">
        <dx-button
          text="Add Ingredient"
          type="success"
          icon="fa fa-plus"
          [elementAttr]="{  class: 'pull-left' }"
          (onClick)="onSaveNewIngredientDetails()">
        </dx-button>
      </div>
     </form>
    </div>
  </dx-popup>
  
  <dx-popup class="popup"  [width]="funcpopWidth(70)" [height]="auto" 
      [showTitle]="true" title="Product Ingredients Details" [dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="productIngredientsModal">
    <div *dxTemplate="let data of 'content'" >
      <dx-scroll-view>
        <form [formGroup]="productIngredientsdetailsfrm" class="col-lg-12  div-nopadding" style="background: #fff;" enctype="multipart/form-data" role="form" (ngSubmit)="onSaveProductIngredients()">
            <div class="col-lg-12  div-nopadding div-backwhite">
                      <div class="col-lg-12" *ngIf="product_type_id == 3">
                          <label for="ti" class="control-label">Active Generic Name</label>
                          <dx-select-box [dataSource]="drugscommonNamesData" valueExpr="common_name_id" placeholder="Select Active Generic Name" displayExpr="generic_name" [searchEnabled]="true" formControlName="active_common_name_id"(onValueChanged)="onGenericNameSelected($event)">
                              <div *dxTemplate="let data of 'item'">
                                  <div class="custom-item">
                                      {{data.generic_name}} 

                                  </div>
                              </div>
                          </dx-select-box>
                      </div>
                      <div class="col-lg-6">
                          <label class="control-label">Ingredient</label>
                          <dx-select-box [dataSource]="ingredientsData" valueExpr="id" displayExpr="name" [searchEnabled]="true"  (onSelectionChanged)="onIngredientsSelectionChange($event)" 
                            placeholder="Ingredients" formControlName="ingredient_id">
                          </dx-select-box>

                        </div>
                      <div class="col-lg-12 " style="margin:1px;">
                        <label class="control-label">Reference Monograph Standard</label>

                        <dx-select-box [dataSource]="specificationData" valueExpr="id" displayExpr="name" [searchEnabled]="true"
                          placeholder="Quality Standard" formControlName="specification_type_id">
                        </dx-select-box>
                      </div>
                      <div class="col-lg-12" style="margin:1px;">

                        <label class="control-label">Quantity per Dosage Unit</label>
                        <dx-text-box formControlName="strength" placeholder="Strength" [showClearButton]="true">
                        </dx-text-box>
                      </div>
                      <div class="col-lg-12" style="margin:1px;">
                        <label class="control-label">SI Unit</label>
                          <dx-select-box [dataSource]="siUnitsData" valueExpr="id" displayExpr="name" [searchEnabled]="true"
                          placeholder="SI Unit" formControlName="si_unit_id">
                        </dx-select-box>
                      </div>
                      <div class="col-lg-12">
                        <div class="col-lg-4">
                            <label class="control-label">Reason For Inclusion</label>

                            <dx-select-box [dataSource]="reasonForInclusionData" valueExpr="id" displayExpr="name" [searchEnabled]="true"
                              placeholder="Reason For Inclusion" formControlName="inclusion_reason_id">
                            </dx-select-box>
                          </div>
                       
                        <div class="col-lg-4">
                          <dx-button
                              text="Add"
                              type="success"
                              icon="fa fa-plus"
                              [elementAttr]="{  class: 'pull-left' }"
                              (onClick)="onAddNewReasonInclusion()">
                          </dx-button>
                        </div>
                      </div>
                      <div class="col-lg-12">
                          <input type="hidden" formControlName="id" />
<!--                           <input type="hidden" formControlName="atc_code_id" />
                          <input type="hidden" formControlName="atc_code" />
                          <input type="hidden" formControlName="atc_code_description" /> -->
                        <button type="submit" (submit)="onSaveProductIngredients()" [disabled]="!productIngredientsdetailsfrm.valid"
                          class="btn btn-primary  pull-right" style="margin:5px;"><i class="fa fa-save"></i>&nbsp;Save Ingredients
                        </button>
                      </div>
                    </div>
                  </form>
                </dx-scroll-view>
                </div>
              </dx-popup>


   
  <!--   <ngx-smart-modal #productPackagingModal identifier="productPackagingModal" customClass="nsm-dialog-animation-btt medium-modal">
      <h4>Primary Packaging Details</h4>
      <form [formGroup]="productPackagingdetailsfrm" (submit)="onSaveProductPackaging()" enctype="multipart/form-data"
        role="form">
        <div class="col-lg-12 form-group " style="margin:1px;">
          <label class="control-label">Container</label>

          <dx-select-box [dataSource]="containerData" valueExpr="id" displayExpr="name" [searchEnabled]="true"
            placeholder=" Container" formControlName="container_id">
          </dx-select-box>
        </div>
        <div class="col-lg-12 form-group " style="margin:1px;">
          <label class="control-label">Container Material</label>

          <dx-select-box [dataSource]="containerMaterialData" valueExpr="id" displayExpr="name" [searchEnabled]="true"
            placeholder="Container Materials" formControlName="container_material_id">
          </dx-select-box>
        </div>
        <div class="col-lg-12 form-group" style="margin:1px;">
          <label class="control-label col-lg-12">No of Units</label>
          
          <dx-text-box formControlName="no_of_units" [showClearButton]="true">
          </dx-text-box>
        </div>
        <div class="col-lg-12 form-group" style="margin:1px;">
          <label class="control-label col-lg-12">No of Pack</label>
          <dx-text-box formControlName="no_of_packs" [showClearButton]="true">
          </dx-text-box>
        </div> 
        <div class="col-lg-12" style="margin:1px;">
          <label class="control-label">SI Unit</label>
            <dx-select-box [dataSource]="siUnitsData" valueExpr="id" displayExpr="name" [searchEnabled]="true"
            placeholder="SI Unit" formControlName="si_unit_id">
          </dx-select-box>
          <input type="hidden" value="1" formControlName="container_type_id" />
        </div>
        <div class="col-lg-12">
          <button type="submit" (submit)="onSaveProductPackaging()" [disabled]="!productPackagingdetailsfrm.valid"
            class="btn btn-primary  pull-right" style="margin:5px;"><i class="fa fa-save"></i>&nbsp;Save Details</button>
        </div>
      </form>
    </ngx-smart-modal> -->


   

    

<dx-popup class="popup"  [width]="funcpopWidth(40)" [height]="auto" [showTitle]="true" title="Product Manufacturing Sites" [dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="isgmpAddinspectionModalShow">

  <div *dxTemplate="let data of 'content'" class="row">
  <dx-scroll-view>
      <div class="col-lg-12">
          <form enctype="multipart/form-data" role="form" [formGroup]="prodgmpAddinspectionFrm" (ngSubmit)="onSaveprodgmpAddinspection()">
              <div class="row">

                  <div class="col-xs-12 col-md-6 col-lg-6 col-xl-12 row">
                      <label class="control-label">GMP Manufacturing site</label>
                      <dx-text-box [readOnly]="true" formControlName="manufacturer_name">
                      </dx-text-box>
                  </div>

                  <div class="col-lg-12">
                      <label class="control-label">Physical Address</label>

                      <dx-text-area [height]="60" [readOnly]="true" formControlName="physical_address" placeholder="Physical Address">
                      </dx-text-area>
                  </div>
                  <div class="col-xs-12 col-md-6 col-lg-6 col-xl-12">
                      <label for="ti" class="control-label">Manufacturing Product Line</label>
                      <dx-select-box [dataSource]="gmpProductLineData" valueExpr="id" placeholder="Product Line" displayExpr="product_line" [searchEnabled]="true" formControlName="gmp_productline_id">
                          <div *dxTemplate="let data of 'item'">
                              <div class="custom-item">
                                  {{data.product_line}} {{data.product_category}}

                              </div>
                          </div>
                      </dx-select-box>
                      <input type="hidden" formControlName="reg_site_id" />

                      <input type="hidden" formControlName="manufacturing_site_id" />
                  </div>
                  <div class="col-lg-12 btn-margin-5">
                      <br />
                      <button type="submit" (submit)="onSaveprodgmpAddinspection()" [disabled]="!prodgmpAddinspectionFrm.valid" class="btn btn-primary"><i class="fa fa-user"></i> Save Product GMP Inspection Details</button>
                  </div>
              </div>
          </form>
      </div>
    </dx-scroll-view>
  </div>
</dx-popup>

<dx-popup class="popup"  [width]="funcpopWidth(80)" [height]="550" [showTitle]="true" title="Local Manufacturing Premises" [dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="isRegisteredPremisesModalShow">

  <div *dxTemplate="let data of 'content'" class="row">
  <dx-scroll-view>
      <dx-data-grid class="table row-border hover"  [allowColumnResizing]="true"  [columnHidingEnabled]="false" [remoteOperations]='true' [height]="520"   [columnHidingEnabled]="false" [dataSource]="registeredPremisesData" keyExpr="id">
          <dxo-filter-row [visible]="false"></dxo-filter-row>
          <dxo-search-panel [visible]="true">
          </dxo-search-panel>
          <dxo-paging [enabled]="true">     
          </dxo-paging>
          <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
          </dxo-pager>

          <dxo-export [enabled]="true" fileName="Premises" [allowExportSelectedData]="true"></dxo-export>

          <dxo-selection mode="single"></dxo-selection>
          <dxo-group-panel [visible]="true"></dxo-group-panel>

          <dxi-column width=130 caption="Actions" name="command-editing" [allowFiltering]="false" [allowSorting]="false" cellTemplate="cellTemplate">
              <div *dxTemplate="let data of 'cellTemplate'" class="btn-cursor">
                  
                  <dx-button [disabled] ="isReadOnly"  text="Select Premises" (click)="funSelectRegisteredPremisessApp(data)"
                  type="danger" icon="edit" [elementAttr]="{ class: 'btn btn-primary' }">
                </dx-button>
              </div>
          </dxi-column>
          <dxi-column dataField="section_name" caption="Premises Category/Type"></dxi-column>
          <dxi-column dataField="name"></dxi-column>

          <dxi-column dataField="premise_reg_no"></dxi-column>
          <dxi-column dataField="permit_no"></dxi-column>
          <dxi-column dataField="physical_address"></dxi-column>
          <dxi-column dataField="postal_address"></dxi-column>
          <dxi-column dataField="region_name"></dxi-column>
          <dxi-column dataField="registration_status" caption="Registration Status"></dxi-column>
          <dxi-column dataField="validity_status" caption="Validity Status"></dxi-column>

          <dxo-grouping #expand [autoExpandAll]="true"></dxo-grouping>
      </dx-data-grid>
    </dx-scroll-view>
  </div>
</dx-popup>




 
<dx-popup class="popup"  [width]="funcpopWidth(40)" [height]="400" [showTitle]="true" title="Region Name" [dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="addRegionDetailsWin">
  
    <div *dxTemplate="let data of 'content'" >
          <form [formGroup]="addRegionDetailsFrm" class="col-lg-12  div-nopadding" style="background: #fff;" enctype="multipart/form-data" role="form" (ngSubmit)="onSaveRegiondetails()">
              <div class="col-lg-12">
                <label class="control-label">Region Name</label>
                <dx-text-box formControlName="name" placeholder="name" [showClearButton]="true">
                </dx-text-box>
              </div>
              
              <input type='hidden' formControlName="country_id"/>
              <input type='hidden' value = 'par_regions' formControlName="tablename"/>

              <div class="col-lg-12">
                  <dx-button
                      text="Add New Region"
                      type="success"
                      icon="fa fa-plus"
                      [elementAttr]="{  class: 'pull-left' }"
                      (onClick)="onSaveRegiondetails()">
                  </dx-button>
                </div>
            </form>
    </div>
</dx-popup>
<dx-popup class="popup"  [width]="funcpopWidth(40)" [height]="400" [showTitle]="true" title="District Name" [dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="addDistrictsDetailsWin">

    <div *dxTemplate="let data of 'content'" >
          <form [formGroup]="addDistrictsDetailsFrm" class="col-lg-12  div-nopadding" style="background: #fff;" enctype="multipart/form-data" role="form" (ngSubmit)="onSaveaddDistrictDetails()">
              <div class="col-lg-12">
                <label class="control-label">District </label>
                <dx-text-box formControlName="name" placeholder="name" [showClearButton]="true">
                </dx-text-box>
              </div>
              
              <input type='hidden' formControlName="region_id"/>
              <input type='hidden' value = 'par_districts' formControlName="tablename"/>

              <div class="col-lg-12">
                  <dx-button
                      text="Add New District"
                      type="success"
                      icon="fa fa-plus"
                      [elementAttr]="{  class: 'pull-left' }"
                      (onClick)="addDistrictDetailsWin()">
                  </dx-button>
                </div>
            </form>
    </div>
</dx-popup>

<dx-popup class="popup" [width]="funcpopWidth(80)" [height]="auto" [showTitle]="true" title="New Manufacturer" [dragEnabled]="false" [closeOnOutsideClick]="" [(visible)]="isnewmanufacturerModalShow">

  <div *dxTemplate="let data of 'content'" class="row">
  <dx-scroll-view>
      <div class="col-lg-12">
          <form enctype="multipart/form-data" role="form" [formGroup]="manufacturerFrm" (ngSubmit)="onAddManufacturerDetails()">

              <div class="row">

                  <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6">

                      <label class="control-label">Manufacturer  Name</label>
                      <dx-text-box formControlName="name">
                      </dx-text-box>

                  </div>
                  <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6">
                      <label class="control-label">Country</label>

                      <dx-select-box [dataSource]="countries" valueExpr="id" displayExpr="name" placeholder="Select Country" (onSelectionChanged)="onCoutryCboSelect($event)" [searchEnabled]="true" formControlName="country_id">
                      </dx-select-box>
                  </div>
                  
                  <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6  input-group">
                      <div class="col-lg-8">
                          <label for="ti" class="control-label">Region/City</label>

                          <dx-select-box [dataSource]="regions" valueExpr="id" displayExpr="name" (onSelectionChanged)="onRegionsCboSelect($event)" [searchEnabled]="true" formControlName="region_id">
                          </dx-select-box>
                      </div>
                      <div class="col-lg-4">
                          <dx-button
                          text="Add Region"
                          type="success"
                          icon="fa fa-plus"
                          [elementAttr]="{  class: 'pull-left' }"
                          (onClick)="OnAddNewManufacturerReionDetails()">
                      </dx-button>
                      </div>

                  </div>
                 
                  <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6  input-group">
                      <div class="col-lg-8">
                          <label for="ti" class="control-label">District(Optional)</label>

                          <dx-select-box [dataSource]="districts" valueExpr="id" placeholder="Select District" displayExpr="name" [searchEnabled]="true" formControlName="district_id">
                          </dx-select-box>
                      </div>
                      <div class="col-lg-4">
                          <dx-button
                          text="Add"
                          type="success"
                          icon="fa fa-plus"
                          [elementAttr]="{  class: 'pull-left' }"
                          (onClick)="OnAddNewManufactureDistrictDetails()">
                      </dx-button>
                      </div>

                  </div>
                  <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6">
                      <label for="ti" class="control-label">Email Address</label>
                      <dx-text-box formControlName="email_address" placeholder="Email Address">
                      </dx-text-box>
                  </div>
                  <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6">
                      <label for="ti" class="control-label">Postal Address</label>
                      <dx-text-box formControlName="postal_address" placeholder="Postal Address">
                      </dx-text-box>
                  </div>
                  <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6">
                      <label for="ti" class="control-label">Physical Address</label>
                      <dx-text-box formControlName="physical_address" placeholder="Physical Address">
                      </dx-text-box>
                  </div>
                  <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6">
                      <label for="ti" class="control-label">Telephone No</label>

                      <dx-text-box formControlName="telephone_no" placeholder="Telephone No">
                      </dx-text-box>
                  </div>
                  <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6">
                      <label class="control-label col-lg-12">Mobile No</label>

                      <dx-text-box formControlName="mobile_no" placeholder="Mobile No">
                      </dx-text-box>
                  </div>

                  <div class="col-lg-12 btn-margin-5">
                      <br />
                      <button type="submit" (submit)="onAddManufacturerDetails()" [disabled]="!manufacturerFrm.valid" class="btn btn-primary"><i
                        class="fa fa-user"></i> Save Manufacturer</button>
                  </div>
              </div>
          </form>
      </div>
    </dx-scroll-view>
  </div>
</dx-popup>
<dx-popup class="popup"  [width]="funcpopWidth(40)" [height]="400" [showTitle]="true" title="District Name" [dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="addDistrictsDetailsWin">
  
    <div *dxTemplate="let data of 'content'" >
          <form [formGroup]="addDistrictsDetailsFrm" class="col-lg-12  div-nopadding" style="background: #fff;" enctype="multipart/form-data" role="form" (ngSubmit)="onSaveaddDistrictDetails()">
              <div class="col-lg-12">
                <label class="control-label">District Name</label>
                <dx-text-box formControlName="name" placeholder="name" [showClearButton]="true">
                </dx-text-box>
              </div>
              
              <input type='hidden' formControlName="region_id"/>
              <input type='hidden' value = 'par_ditricts' formControlName="tablename"/>

              <div class="col-lg-12">
                  <dx-button
                      text="Add New District"
                      type="success"
                      icon="fa fa-plus"
                      [elementAttr]="{  class: 'pull-left' }"
                      (onClick)="onSaveaddDistrictDetails()">
                  </dx-button>
                </div>
            </form>
    </div>
</dx-popup>

<dx-popup class="popup" [width]="funcpopWidth(80)" [height]="600" [showTitle]="true" title="New Manufacturing Sites" [dragEnabled]="false" [closeOnOutsideClick]="" [(visible)]="isnewmanufactureringSiteDetailsModalShow">

  <div *dxTemplate="let data of 'content'" class="row">
  <dx-scroll-view>
      <div class="col-lg-12">
          <form enctype="multipart/form-data" role="form" [formGroup]="manufacturingSiteFrm" (ngSubmit)="onAddManufacturingSite()">

              <div class="row">

                  <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6">

                      <label class="control-label">Manufacturing Site</label>
                      <dx-text-box formControlName="name">
                      </dx-text-box>

                  </div>
                  <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6">
                      <label class="control-label">Country</label>

                      <dx-select-box [dataSource]="countries" valueExpr="id" displayExpr="name" placeholder="Select Country" (onSelectionChanged)="onCoutryCboSelect($event)" [searchEnabled]="true" formControlName="country_id">
                      </dx-select-box>
                  </div>
                  <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6  input-group">
                      <div class="col-lg-8">
                          <label for="ti" class="control-label">Region/City</label>

                          <dx-select-box [dataSource]="regions" valueExpr="id" displayExpr="name" (onSelectionChanged)="onRegionsCboSelect($event)" [searchEnabled]="true" formControlName="region_id">
                          </dx-select-box>
                      </div>
                      <div class="col-lg-4">
                          <dx-button
                          text="Add Region"
                          type="success"
                          icon="fa fa-plus"
                          [elementAttr]="{  class: 'pull-left' }"
                          (onClick)="OnAddNewSiteReionDetails()">
                      </dx-button>
                      </div>

                  </div>
                 
                  <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6  input-group">
                      <div class="col-lg-8">
                          <label for="ti" class="control-label">District(Optional)</label>

                          <dx-select-box [dataSource]="districts" valueExpr="id" placeholder="Select District" displayExpr="name" [searchEnabled]="true" formControlName="district_id">
                          </dx-select-box>
                      </div>
                      <div class="col-lg-4">
                          <dx-button
                          text="Add"
                          type="success"
                          icon="fa fa-plus"
                          [elementAttr]="{  class: 'pull-left' }"
                          (onClick)="OnAddNewSiteDistrictDetails()">
                      </dx-button>
                      </div>

                  </div>
                  <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6">
                      <label for="ti" class="control-label">Email Address</label>
                      <dx-text-box formControlName="email_address" placeholder="Email Address">
                      </dx-text-box>
                  </div>
                  <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6">
                      <label for="ti" class="control-label">Postal Address</label>
                      <dx-text-box formControlName="postal_address" placeholder="Postal Address">
                      </dx-text-box>
                  </div>
                  <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6">
                      <label for="ti" class="control-label">Telephone No</label>

                      <dx-text-box formControlName="telephone_no" placeholder="Telephone No">
                      </dx-text-box>
                  </div>
                  <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6">
                      <label class="control-label col-lg-12">Mobile No</label>

                      <dx-text-box formControlName="mobile_no" placeholder="Mobile No">
                      </dx-text-box>
                  </div>
                  <div class="col-lg-12">
                      <label class="control-label">Physical Address</label>

                      <dx-text-area [height]="60" formControlName="physical_address" placeholder="Physical Address">
                      </dx-text-area>
                  </div>
                  <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6 ">
                      <label for="ti" class="control-label col-lg-12">TIN No</label>
                      <dx-number-box [value]="20" disabled formControlName="tin_no" placeholder="TIN NO">
                      </dx-number-box>
                  </div>
                  <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6">
                      <label class="control-label">Contact Person</label>
                      <dx-text-box formControlName="contact_person" placeholder="Contact Person">
                      </dx-text-box>
                  </div>

                  <input type='hidden' formControlName="manufacturer_id" />
                  <div class="col-lg-12 btn-margin-5">
                      <br />
                      <button type="submit" (submit)="onAddManufacturingSite()" [disabled]="!manufacturingSiteFrm.valid" class="btn btn-primary"><i
                class="fa fa-user"></i> Save Manufacturing Site</button>
                  </div>
              </div>
          </form>
      </div>
    </dx-scroll-view>
  </div>
</dx-popup>

<dx-popup class="popup" [width]="funcpopWidth(70)" [height]="600" [showTitle]="true" title="Product Manufacturing Sites" [dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="isproductmanSiteDetailsModalShow">

  <div *dxTemplate="let data of 'content'" class="row">
    <dx-scroll-view>
      <div class="col-lg-12">
          <form enctype="multipart/form-data" role="form" [formGroup]="productmanufacturingSiteFrm" (ngSubmit)="onsaveProdManufacturingSite()">
              <div class="row">
              <div class="col-xs-12 col-md-6 col-lg-6 col-xl-12" *ngIf="product_type_id == 3">
                  <label for="ti" class="control-label">Active Generic Name</label>
                    <dx-select-box [dataSource]="drugscommonNamesData" valueExpr="common_name_id" 
                      placeholder="Select Active Generic Name" displayExpr="generic_name" [searchEnabled]="true" formControlName="active_common_name_id"(onValueChanged)="onGenericNameSelected($event)">
                      <div *dxTemplate="let data of 'item'">
                          <div class="custom-item">
                              {{data.generic_name}} 

                           </div>
                      </div>
                    </dx-select-box>
                </div>
                <div class="col-xs-12 col-md-6 col-lg-6 col-xl-12 row">
                      <div class="col-lg-10">
                          <label class="control-label">Manufacturing Site Name</label>
                          <dx-text-box [readOnly]="true" formControlName="manufacturer_name">
                          </dx-text-box>
                      </div>
                      <div class="col-lg-2">
                          <button type="button" class="btn btn-success" style="margin-top:15px !important;" (click)="onSearchProductManufacturer()"><i
                  class="fa fa-search"></i>Search</button>
                      </div>
                  </div>
                  <div class="col-lg-12">
                      <label class="control-label">Physical Address</label>

                      <dx-text-area [height]="60" [readOnly]="true" formControlName="physical_address" placeholder="Physical Address">
                      </dx-text-area>
                  </div>
                  
                  <div class="col-lg-12">
                    <label for="ti" class="control-label">Manufacturing Scope</label>

                    <dx-select-box [dataSource]="manufacturingRoleData" valueExpr="id"  placeholder="Manufacturing scope..." displayExpr="name" [searchEnabled]="true" formControlName="manufacturer_role_id">
                    </dx-select-box>
                  </div>
                  <div class="col-lg-12">
                    <label class="control-label">Other Manufacturing Activities</label>
                    <dx-text-area [height]="60"
                     formControlName="manufacturing_activities" placeholder="Manufacturing Activities">
                    </dx-text-area>
                </div>
                <div class="col-lg-12 div-nopadding">
                  <label class="control-label">Has the Manufacturing Site been Inspected/Submitted Request for Inspection to the NDA</label>
                  <dx-select-box [dataSource]="confirmDataParamAll" (onValueChanged)="onManufacturingSiteHasInspection($event)" 
                   valueExpr="id" displayExpr="name" [searchEnabled]="true" 
                     formControlName="has_beeninspected">
                  </dx-select-box>
                </div>
                <div class="col-xs-12 input-group col-lg-12" *ngIf="has_beeninspected">
                   <div class="col-lg-8">
                      <label class="control-label">Inspected site</label>
                      <dx-text-box [readOnly]="true" formControlName="inspected_site_name">
                      </dx-text-box>

                    </div>
                    <div class="col-lg-4">
                      <dx-button
                          text="Search GMP Inspection"
                          type="success"
                          icon="fa fa-plus"
                          [elementAttr]="{  class: 'pull-left' }"
                          (onClick)="onSearchInspectedManufacturingSites()">
                      </dx-button>
                    </div>
                </div>
                <div class="col-xs-12 col-md-12 col-lg-12 col-xl-12" *ngIf="has_beeninspected">
                    <label for="ti" class="control-label">Manufacturing Product Line</label>
                    <dx-select-box [dataSource]="gmpProductLineData" valueExpr="id" placeholder="Product Line" displayExpr="product_line" [searchEnabled]="true" formControlName="gmp_productline_id">
                        <div *dxTemplate="let data of 'item'">
                            <div class="custom-item">
                                {{data.product_line}} {{data.product_category}}

                            </div>
                        </div>
                    </dx-select-box>
                </div>
      
                <div class="col-lg-12 btn-margin-5">
                    <input type="hidden" formControlName="reg_site_id" />
                   <input type="hidden" formControlName="gmp_application_code" />
                  <input type="hidden" formControlName="manufacturer_id" />
                  <input type="hidden" formControlName="man_site_id" />

                    <br />
                    <button type="submit" (submit)="onsaveProdManufacturingSite()"  class="btn btn-primary"><i class="fa fa-user"></i> Save Product Manufacturer</button>
                </div>
              </div>
          </form>
      </div>
    </dx-scroll-view>
  </div>
</dx-popup>

<!-- API Manufacturer Modal-->
<dx-popup class="popup" [width]="funcpopWidth(40)" [height]="auto" [showTitle]="true" title="Product API Manufacturer" [dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="isapimanSiteDetailsModalShow">

    <div *dxTemplate="let data of 'content'" class="row">
    <dx-scroll-view>
        <form enctype="multipart/form-data" role="form" [formGroup]="productapimanufacturingSiteFrm" (ngSubmit)="onsaveAPIManufacturingSite()">
          <div class="row">
            <div class="col-xs-12 col-md-6 col-lg-6 col-xl-12" *ngIf="product_type_id == 3">
              <label for="ti" class="control-label">Active Generic Name</label>
                <dx-select-box [dataSource]="drugscommonNamesData" valueExpr="common_name_id" 
                    placeholder="Select Active Generic Name" displayExpr="generic_name" [searchEnabled]="true" formControlName="active_common_name_id"(onValueChanged)="onGenericNameSelected($event)">
                    <div *dxTemplate="let data of 'item'">
                      <div class="custom-item">
                        {{data.generic_name}} 

                      </div>
                    </div>
                  </dx-select-box>
              </div>
            <div class="col-xs-12 col-md-6 col-lg-6 col-xl-12 row">
              <div class="col-lg-10">
                <label class="control-label">Manufacturer Details</label>
                <dx-text-box [readOnly]="true" formControlName="name">
                </dx-text-box>
              </div>
              <div class="col-lg-2">
                <button type="button" class="btn btn-success" style="margin-top:15px !important;" (click)="onSearchAPIManufacturer()"><i
                    class="fa fa-search"></i>Search</button>
              </div>
            </div>
            <div class="col-lg-12">
              <label class="control-label">Physical Address</label>
              <dx-text-area [height]="60" [readOnly]="true" formControlName="physical_address" 
                placeholder="Physical Address" >
              </dx-text-area>
            </div>
            <div class="col-xs-12 col-md-6 col-lg-6 col-xl-12">
              <label for="ti" class="control-label">Active Pharmeceutical Ingredients</label>
              <dx-select-box [dataSource]="drugsingredientsData" valueExpr="id" placeholder="Select Active Pharmeceutical Ingredients"
                displayExpr="ingredient" [searchEnabled]="true" formControlName="active_ingredient_id">
                <div *dxTemplate="let data of 'item'">
                  <div class="custom-item">
                      {{data.ingredient}} {{data.specification}} {{data.strength}}  {{data.si_units}} {{data.reason_of_inclusion}}
                      
                  </div>
              </div>
              </dx-select-box>
             <input type="hidden" formControlName="manufacturer_id" />

            </div>

            <div class="col-lg-12 btn-margin-5">
              <br />
              <button type="submit" (submit)="onsaveAPIManufacturingSite()" [disabled]="!productapimanufacturingSiteFrm.valid"
                class="btn btn-primary"><i class="fa fa-user"></i> Save API Manufacturer</button>
            </div>
          </div>
        </form>
      </dx-scroll-view>
      </div>
</dx-popup>

<dx-popup class="popup"  [width]="funcpopWidth(80)" [height]="450" [showTitle]="true" title="Manufacturer(s) Information" [dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="isproductManufacturerModalShow">

    <div *dxTemplate="let data of 'content'" class="row">
    <dx-scroll-view>
        <dx-data-grid class="table row-border hover"  [allowColumnResizing]="true"  [columnHidingEnabled]="false"  [height]="420"  [remoteOperations]='true' (onToolbarPreparing)="onManufacturerPreparing($event)" [dataSource]="manufacturersData" keyExpr="id">
            <dxo-filter-row [visible]="false"></dxo-filter-row>
            <dxo-search-panel [visible]="true">
            </dxo-search-panel>
            <dxo-paging [enabled]="true">
            </dxo-paging>
            <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
            </dxo-pager>
            <dxo-export [enabled]="true" fileName="manufacturingFile" [allowExportSelectedData]="true"></dxo-export>
            
            <dxo-group-panel [visible]="true"></dxo-group-panel>
            <dxi-column [width]="140" caption="Action" name="command-editing" [allowFiltering]="false" [allowSorting]="false" cellTemplate="cellTemplate">
                <div *dxTemplate="let data of 'cellTemplate'">
                   
                  <dx-button [disabled] ="isReadOnly"  text="Select Manufacturer" (click)="funcSelectManufacturer(data)"
                  type="success" icon="edit" [elementAttr]="{ class: 'btn btn-primary' }">
                </dx-button>
                </div>
            </dxi-column>
            <dxi-column dataField="manufacturer_name"></dxi-column>
            <dxi-column dataField="country"></dxi-column>
            <dxi-column dataField="region"></dxi-column>
            <dxi-column dataField="district"></dxi-column>
            <dxi-column dataField="physical_address"></dxi-column>
            <dxi-column dataField="postal_address"></dxi-column>
            <dxi-column dataField="email_address"></dxi-column>
           
            <dxo-paging [pageSize]="50"></dxo-paging>
        </dx-data-grid>
      </dx-scroll-view>
    </div>
  </dx-popup>
  
  <dx-popup class="popup"  [width]="funcpopWidth(80)" [height]="450" [showTitle]="true" title="Manufacturing Site Information" [dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="isproductManufactureringSiteModalShow">
  
    <div *dxTemplate="let data of 'content'" class="row">
    <dx-scroll-view>
        <dx-data-grid class="table row-border hover"  [allowColumnResizing]="true"  [columnHidingEnabled]="false" [remoteOperations]='true'  [height]="420"  (onToolbarPreparing)="onManufacturingSitePreparing($event)" [dataSource]="manufacturersSiteData" keyExpr="id">
            <dxo-filter-row [visible]="false"></dxo-filter-row>
            <dxo-search-panel [visible]="true">
            </dxo-search-panel>
            <dxo-paging [enabled]="true">
            </dxo-paging>
            <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
            </dxo-pager>
            <dxo-export [enabled]="true" fileName="manufacturingFile" [allowExportSelectedData]="true"></dxo-export>
            
            <dxo-group-panel [visible]="true"></dxo-group-panel>
            <dxi-column [width]="140" caption="Action" name="command-editing" [allowFiltering]="false" [allowSorting]="false" cellTemplate="cellTemplate">
              <div *dxTemplate="let data of 'cellTemplate'">
                
                  <dx-button [disabled] ="isReadOnly"  text="Select Manufacturing Site" (click)="funcSelectManufacturingSite(data)"
                  type="success" icon="edit" [elementAttr]="{ class: 'btn btn-primary' }">
                </dx-button>

              </div>
          </dxi-column>
            <dxi-column dataField="manufacturing_site_name"></dxi-column>
            <dxi-column dataField="country"></dxi-column>
            <dxi-column dataField="region"></dxi-column>
            <dxi-column dataField="district"></dxi-column>
            <dxi-column dataField="physical_address"></dxi-column>
            <dxi-column dataField="postal_address"></dxi-column>
            <dxi-column dataField="email_address"></dxi-column>
            
  
            <dxo-paging [pageSize]="50"></dxo-paging>
        </dx-data-grid>
      </dx-scroll-view>
    </div>
  </dx-popup>

  <!-- GMP Inspeciton sites -->
  <dx-popup class="popup" [width]="funcpopWidth(80)" [height]="600" [showTitle]="true" title="GMP Inspection Sites" [dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="isgmpinspectionModalShow">

    <div *dxTemplate="let data of 'content'" class="row">
    <dx-scroll-view>
        <dx-data-grid class="table row-border hover"  [allowColumnResizing]="true"  [columnHidingEnabled]="false"  [height]="550"  [remoteOperations]='true' height=520 [dataSource]="tradergmpInspectionData" keyExpr="id">
            <dxo-filter-row [visible]="false"></dxo-filter-row>
            <dxo-search-panel [visible]="true">
            </dxo-search-panel>
            <dxo-paging [enabled]="true">
            </dxo-paging>
            <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
            </dxo-pager>
            <dxo-export [enabled]="true" fileName="manufacturingFile" [allowExportSelectedData]="true"></dxo-export>
  
            
            <dxo-group-panel [visible]="true"></dxo-group-panel>
            <dxi-column [width]="100" caption="Action" name="command-editing" [allowFiltering]="false" [allowSorting]="false" cellTemplate="cellTemplate">
              <div *dxTemplate="let data of 'cellTemplate'">
                 
                  <dx-button [disabled] ="isReadOnly"  text="Select Manufacturer" (click)="funcSelectGmpInspection(data)"
                  type="success" icon="edit" [elementAttr]="{ class: 'btn btn-primary' }">
                </dx-button>


              </div>
          </dxi-column>
            <dxi-column dataField="gmp_certificate_no"></dxi-column>
            <dxi-column dataField="manufacturer_name"></dxi-column>
            <dxi-column dataField="country_name"></dxi-column>
            <dxi-column dataField="region_name"></dxi-column>
            <dxi-column dataField="physical_address"></dxi-column>
            <dxi-column dataField="postal_address"></dxi-column>
            <dxi-column dataField="email_address"></dxi-column>
            <dxi-column dataField="product_linedetails"></dxi-column>
            <dxi-column dataField="registration_status"></dxi-column>
           
            <dxo-paging [pageSize]="50"></dxo-paging>
        </dx-data-grid>
      </dx-scroll-view>
    </div>
  </dx-popup>
  
  <dx-popup class="popup" [width]="funcpopWidth(80)" [height]="600" [showTitle]="true" title="Sample Details" [dragEnabled]="false"
  [closeOnOutsideClick]="true" [(visible)]="isSampleDetailsWinshow">
  <div *dxTemplate="let data of 'content'" class="row">
  <dx-scroll-view>
    <form [formGroup]="sampleDetailsFrm" enctype="multipart/form-data" role="form" (ngSubmit)="onSavesampleDetails()">
      <div class="row" style="background: #fff;">
          <div class="col-lg-6" >
            <label class="control-label">Batch No</label>
            <dx-text-box formControlName="batch_no" placeholder="batch_no" [showClearButton]="true">
            </dx-text-box>
          </div>
          <div class="col-lg-6" >

            <label class="control-label">Manufacturering Date</label>
            <dx-date-box formControlName="manufacturing_date" placeholder="manufacturing_date" [showClearButton]="true">
            </dx-date-box>
          </div>
          <div class="col-lg-6" >

            <label class="control-label">Expiry Date</label>
            <dx-date-box formControlName="expiry_date" placeholder="expiry_date" [showClearButton]="true">
            </dx-date-box>
          </div>

          <div class="col-lg-6 form-group " >

            <label class="control-label">Storage Conditions</label>

            <dx-text-box formControlName="storage_condition" placeholder="Storage" [showClearButton]="true">
            </dx-text-box>
          </div>
          
          <div class="col-lg-6" >

            <label class="control-label">Number of Samples</label>
            <dx-number-box formControlName="quantity" placeholder="quantity" [showClearButton]="true">
            </dx-number-box>
          </div>

          <div class="col-lg-6 form-group " >

            <input type="hidden" name="id"  formControlName = "id"/>
          </div>
          
      <div class="col-lg-12">
        <button type="submit" (submit)="onSavesampleDetails()" [disabled]="!sampleDetailsFrm.valid"
          class="btn btn-primary  pull-right" style="margin:5px;"><i class="fa fa-save"></i>&nbsp;Save Sample Details
        </button>
      </div>
      </div>
    </form>
  </dx-scroll-view>
  </div>
  </dx-popup>

  <dx-popup class="popup" [width]="funcpopWidth(45)" [height]="450" [showTitle]="true" title="MAH Pharmaceutical Active Substances" [dragEnabled]="false"
  [closeOnOutsideClick]="true" [(visible)]="isActivePharmaceuticalWinshow">
  <div *dxTemplate="let data of 'content'" class="row">
  <dx-scroll-view>
    <form [formGroup]="activePharmaceuticalDetailsFrm" enctype="multipart/form-data" role="form" (ngSubmit)="onSaveActivePharmaceuticalDetails()">
      <div class="row" style="background: #fff;">
         <div class="col-lg-6">
              <label for="ti" class="control-label">Active Pharmeceutical Ingredients</label>
              <dx-select-box [dataSource]="drugsingredientsData" valueExpr="id" placeholder="Select Active Pharmeceutical Ingredients"
                displayExpr="ingredient" [searchEnabled]="true" formControlName="active_ingredient_id">
                <div *dxTemplate="let data of 'item'">
                  <div class="custom-item">
                      {{data.ingredient}} {{data.specification}} {{data.strength}}  {{data.si_units}} {{data.reason_of_inclusion}}
                      
                  </div>
              </div>
              </dx-select-box>
             <input type="hidden" formControlName="manufacturer_id" />

          </div>
          <div class="col-lg-6" >
            <label class="control-label">Product Name</label>
            <dx-text-box formControlName="prod_name" placeholder="Product Name" [showClearButton]="true">
            </dx-text-box>
          </div>
          <div class="col-lg-6" >
            <label class="control-label">Strength</label>
            <dx-text-box formControlName="strength" placeholder="Strength" [showClearButton]="true">
            </dx-text-box>
          </div>
          <div class="col-lg-6" >
          <label class="control-label">pharmaceutical form </label>
            <dx-select-box [dataSource]="dosageFormsData" [readOnly]= "isReadOnly" valueExpr="id" displayExpr="name" [searchEnabled]="true"
            placeholder="Strength  Dosage Form" formControlName="dosage_form_id">
             </dx-select-box>
          </div>

          <div class="col-lg-6 form-group " >

            <label class="control-label">Indication</label>

            <dx-text-box formControlName="indication" placeholder="Indication" [showClearButton]="true">
            </dx-text-box>
          </div>
          <div class="col-lg-6 form-group " >

            <input type="hidden" name="id"  formControlName = "id"/>
          </div>
          
      <div class="col-lg-12">
        <button type="submit" (submit)="onSaveActivePharmaceuticalDetails()" [disabled]="!activePharmaceuticalDetailsFrm.valid"
          class="btn btn-primary  pull-right" style="margin:5px;"><i class="fa fa-save"></i>&nbsp;Save Active Details
        </button>
      </div>
      </div>
    </form>
  </dx-scroll-view>
  </div>
  </dx-popup>
  
<dx-popup class="popup"  [width]="funcpopWidth(70)" [height]="600" [showTitle]="true" title=" GMP Inspections In other States/Countries" [dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="otherStatesGmpInspections">
  <div *dxTemplate="let data of 'content'" >
      <dx-scroll-view>
        <form [formGroup]="otherStatesGmpInspectionsFrm" class="col-lg-12  div-nopadding" style="background: #fff;" enctype="multipart/form-data" role="form" (ngSubmit)="onSaveotherStatesGmpInspections()">
          <div class="col-lg-12 row div-nopadding div-backwhite">
              <div class="col-lg-12" *ngIf="product_type_id == 3">
                  <label for="ti" class="control-label">Active Generic Name</label>
                    <dx-select-box [dataSource]="drugscommonNamesData" valueExpr="common_name_id" 
                      placeholder="Select Active Generic Name" displayExpr="generic_name" [searchEnabled]="true" formControlName="active_common_name_id"(onValueChanged)="onGenericNameSelected($event)">
                      <div *dxTemplate="let data of 'item'">
                          <div class="custom-item">
                              {{data.generic_name}} 

                           </div>
                      </div>
                    </dx-select-box>
                </div>
                
            <div class="col-lg-12 " style="margin:1px;">
              <label class="control-label">Country</label>

              <dx-select-box [dataSource]="recognisedassessmentsCountriesData" valueExpr="id" displayExpr="name" [searchEnabled]="true"(onSelectionChanged)="onCoutryCboSelect($event)"
                placeholder="Country" formControlName="country_id">
              </dx-select-box>
            </div>
            <div class="col-lg-12 " style="margin:1px;">
              <label class="control-label">Approving Authority</label>
              <dx-select-box [dataSource]="approvingAuthorityData" valueExpr="id" displayExpr="name" [searchEnabled]="true"
                placeholder="Approving Authority" formControlName="approving_authority_id">
              </dx-select-box>
            </div>
            <div class="col-lg-12" style="margin:1px;">
              <label class="control-label">GMP Inspection Certificate Number</label>
              <dx-text-box formControlName="gmpapplication_reference" placeholder="GMP Inspection Certificate Number" [showClearButton]="true">
              </dx-text-box>
            </div>
            <div class="col-lg-12" style="margin:1px;">

              <label class="control-label">Inspection Date</label>
              <dx-date-box 
                [type]="'date'"
                [max]="maxDate"
                formControlName="inspection_date" placeholder="Inspection Date" [showClearButton]="true">
              </dx-date-box>
            </div>
            <div class="col-lg-12" style="margin:1px;">

              <label class="control-label">Approval Date</label>
              <dx-date-box formControlName="approval_date"
                [type]="'date'"
                [max]="maxDate"
                placeholder="Approval Date" [showClearButton]="true">
              </dx-date-box>
            </div>
            <div class="col-lg-12" style="margin:1px;">
              <label>FPP Manufacturer</label>
              <dx-select-box [items]="gmpfppManufacturerData"  valueExpr="id"
               displayExpr="name" placeholder="Manufacturing Site Name"(onSelectionChanged)="onSelectFPPManu($event)" 
              [searchEnabled]="true" formControlName="fpp_manufacturer_id">
              </dx-select-box>

            </div>

            <div class="col-lg-12" style="margin:1px;">
                <label for="ti" class="control-label">Manufacturing Product Line</label>
                <dx-select-box [dataSource]="gmpFFProductLineData" valueExpr="id" placeholder="Product Line" displayExpr="product_line" [searchEnabled]="true" formControlName="gmp_productline_id">
                        <div *dxTemplate="let data of 'item'">
                            <div class="custom-item">
                                {{data.product_line}} {{data.product_category}}

                            </div>
                        </div>
                    </dx-select-box>
                </div>
            <div class="col-lg-12" style="margin:1px;">
              <label>Product Category</label>
              <dx-select-box [items]="gmpproductTypeData"  valueExpr="id"
               displayExpr="name" placeholder="Product Category" 
              [searchEnabled]="true" formControlName="gmpproduct_type_id">
              </dx-select-box>
            </div>
            <div class="col-lg-12" style="margin:1px;">
              <label>Manufacturing Activities</label>
              <dx-select-box [items]="manufacturingActivitiesData" [searchEnabled]="true" valueExpr="id" displayExpr="manufacturing_activity" formControlName="manufacturing_activity_id" placeholder="Select Manufacturing Activities">
              </dx-select-box>
            </div>

            <div class="col-lg-12">
                <input type="hidden" formControlName="id"/>
                <input type="hidden" formControlName="manufacturing_site_id"/>
                <input type="hidden" value="application_code" formControlName="application_code" />
              <button type="submit" (submit)="onSaveotherStatesGmpInspections()" [disabled]="!otherStatesGmpInspectionsFrm.valid"
                class="btn btn-primary  pull-right" style="margin:5px;"><i class="fa fa-save"></i>&nbsp;Save Details
              </button>
            </div>
          </div>
        </form>
        </dx-scroll-view>
      </div>
    </dx-popup>

  
<dx-popup class="popup"  [width]="funcpopWidth(70)" [height]="600" [showTitle]="true" title="Product Registration (Marketing authorisation) status in other States/Countries" [dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="otherProdStatesRegistrations">
  <div *dxTemplate="let data of 'content'" >
        <form [formGroup]="otherProdStatesRegistrationsFrm" class="col-lg-12  div-nopadding" style="background: #fff;" enctype="multipart/form-data" role="form" (ngSubmit)="onSaveotherProdStatesRegistrations()">
          <div class="col-lg-12  row  div-nopadding div-backwhite">
            <div class="col-lg-12" *ngIf="product_type_id == 3">
                  <label for="ti" class="control-label">Active Generic Name</label>
                    <dx-select-box [dataSource]="drugscommonNamesData" valueExpr="common_name_id" 
                      placeholder="Select Active Generic Name" displayExpr="generic_name" [searchEnabled]="true" formControlName="active_common_name_id"(onValueChanged)="onGenericNameSelected($event)">
                      <div *dxTemplate="let data of 'item'">
                          <div class="custom-item">
                              {{data.generic_name}} 

                           </div>
                      </div>
                    </dx-select-box>
                </div>
         
            <div class="col-lg-12 " style="margin:1px;">
              <label class="control-label">Country</label>

              <dx-select-box [dataSource]="recognisedassessmentsCountriesData" valueExpr="id" displayExpr="name" [searchEnabled]="true"(onSelectionChanged)="onCoutryCboSelect($event)"
                placeholder="Country" formControlName="country_id">
              </dx-select-box>
            </div>
            <div class="col-lg-12 " style="margin:1px;">
              <label class="control-label">Approving Authority</label>
              <dx-select-box [dataSource]="approvingAuthorityData" valueExpr="id" displayExpr="name" [searchEnabled]="true"
                placeholder="Approving Authority" formControlName="approving_authority_id">
              </dx-select-box>
            </div>
            <div class="col-lg-12" style="margin:1px;">

              <label class="control-label">Registration Reference No:</label>
              <dx-text-box formControlName="registration_ref" placeholder="Registration Reference No:" [showClearButton]="true">
              </dx-text-box>
            </div>

            <div class="col-lg-12" style="margin:1px;">               
             <label class="control-label">Date of Registration</label>
                <dx-date-box
                  [type]="'date'"
                  [max]="maxDate"
                  [formControlName]="'date_of_registration'"
                 >
                </dx-date-box>
            </div>
            <div class="col-lg-12" style="margin:1px;">
              <label>Current Registration Status(Active, Withdrawn)</label>
              <dx-select-box [items]="currentRegStatusData" [searchEnabled]="true" valueExpr="id" displayExpr="name" formControlName="current_registrationstatus" placeholder="Current Registration Status(Active, Withdrawn)">
              </dx-select-box>
            </div>
            <div class="col-lg-12">
                <input type="hidden" formControlName="id" />
                <input type="hidden" value="application_code" formControlName="application_code" />
              <button type="submit" (submit)="onSaveotherProdStatesRegistrations()" [disabled]="!otherProdStatesRegistrationsFrm.valid"
                class="btn btn-primary  pull-right" style="margin:5px;"><i class="fa fa-save"></i>&nbsp;Save Details
              </button>
            </div>
          </div>
        </form>
      </div>
    </dx-popup>

