<div class="col-xl-12">
    <div class="breadcrumb-holder">
      <h1 class="main-title float-left">Product Registration</h1>
      <ol class="breadcrumb float-right">
        <li class="breadcrumb-item">Home</li>
        <li class="breadcrumb-item active">Dashboard</li>
        <li class="breadcrumb-item active"> {{process_title}}</li>
  
      </ol>
      <div class="clearfix"></div>
    </div>
  </div>
  
  <div style="background: #fff; font-weight: bold;padding:5px;margin-bottom: 5px !important; height: 55px !important;">
    <div class="row">
      <div class="col-lg-3">
        <label style="font-weight: bold;margin: 5px; font-style:italics;font-size: 15px;font-style: italics; color: green;">
          Tracking No: <i> {{tracking_no}}</i> </label>
      </div>
      <div class="col-lg-2">
        <label style="font-weight: bold;margin: 5px; font-style:italics;font-size: 15px;font-style: italics;color: green;">Application
          Status:<i> {{status_name}}</i> </label>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-12">
      <wizard [navigationMode]='strict' style="background: #fff !important; height: 100% !important;">
        <wizard-step stepTitle="Product Application Details" class="wizardStep-height">
            <div class="col-lg-12 no-padding" *ngIf="prodclass_category_id == 5 || prodclass_category_id == 9 || prodclass_category_id == 13 || prodclass_category_id == 14  ">
            <app-food-productsdetails  
              [productGeneraldetailsfrm] ="productGeneraldetailsfrm"  
              [assessmentProcedureData] ="assessmentProcedureData"  
              [classificationData] ="classificationData"  
              [commonNamesData] ="commonNamesData"  
              [siUnitsData] ="siUnitsData"  
              [distributionCategoryData] ="distributionCategoryData"  
              [productFormData] ="productFormData" 
              [methodOfUseData] ="methodOfUseData"
              [tabaccoFlavourData] = "tabaccoFlavourData"  
              [intendedEndUserData] ="intendedEndUserData"  
              [productSubCategoryData] ="productSubCategoryData"  
              [productSpecialCategoryData] ="productSpecialCategoryData"
              [devicesTypeData] ="devicesTypeData" 
              [storageConditionData] ="storageConditionData" 
              [dosageFormsData] ="dosageFormsData" 
              [routeOfAdministrationData] ="routeOfAdministrationData"
              [productCategoryData] ="productCategoryData" 
              [durationDescData] ="durationDescData"
              [productTypeData] ="productTypeData" 
              [confirmDataParam] ="confirmDataParam" 
              [payingCurrencyData] ="payingCurrencyData" 
              [fastTrackOptionsData] ="fastTrackOptionsData" 
              (productTypeEvent)="product_origin_id=$event"
              [zonesData] ="zonesData" [section_id] ="section_id"  [atc_code_id] ="atc_code_id"  [tra_product_id] ="tra_product_id" [reg_product_id] ="reg_product_id"   [isReadOnly] ="isReadOnly" [sub_module_id] ="sub_module_id" [application_code] ="application_code">
            </app-food-productsdetails>

          </div>
          <div class="col-lg-12 no-padding" *ngIf="prodclass_category_id == 1  || prodclass_category_id == 8 || prodclass_category_id == 11 || prodclass_category_id == 12">
                <app-drugs-productsdetails  [productGeneraldetailsfrm] ="productGeneraldetailsfrm"  
                [assessmentProcedureData] ="assessmentProcedureData"  
                [classificationData] ="classificationData"  
                [commonNamesData] ="commonNamesData"  
                [siUnitsData] ="siUnitsData"  
                [distributionCategoryData] ="distributionCategoryData"  
                [productFormData] ="productFormData" 
                [methodOfUseData] ="methodOfUseData"  
                [intendedEndUserData] ="intendedEndUserData"  
                [productSubCategoryData] ="productSubCategoryData"  
                [productSpecialCategoryData] ="productSpecialCategoryData"
                [devicesTypeData] ="devicesTypeData" 
                [reasonForClassificationData] ="reasonForClassificationData"
                [gmdnCategoryData] ="gmdnCategoryData"
                [storageConditionData] ="storageConditionData" 
                [dosageFormsData] ="dosageFormsData" 
                [routeOfAdministrationData] ="routeOfAdministrationData"
                [productCategoryData] ="productCategoryData" 
                [durationDescData] ="durationDescData"
                [productTypeData] ="productTypeData" 
                [confirmDataParam] ="confirmDataParam" 
                [confirmDataParamAll] ="confirmDataParamAll"
                [payingCurrencyData] ="payingCurrencyData" 
                [fastTrackOptionsData] ="fastTrackOptionsData"
                [isReadOnlyTraderasLtr] ="isReadOnlyTraderasLtr" 
                (productTypeEvent)="product_origin_id=$event"
                [zonesData] ="zonesData" [section_id] ="section_id"  [tra_product_id] ="tra_product_id" [reg_product_id] ="reg_product_id"  [atc_code_id] ="atc_code_id" 
                
                [targetSpeciesData]="targetSpeciesData"
                [prodclass_category_id] ="prodclass_category_id" 
                 [isReadOnly] ="isReadOnly" [sub_module_id] ="sub_module_id" [application_code] ="application_code">
                </app-drugs-productsdetails>  
             </div>
             <div class="col-lg-12 no-padding" *ngIf="prodclass_category_id == 2 || prodclass_category_id == 10 || prodclass_category_id == 15  || prodclass_category_id == 16   || prodclass_category_id == 17 || prodclass_category_id == 10">
              <app-cosmetics-productsdetails  
                [productGeneraldetailsfrm] ="productGeneraldetailsfrm"  
                [assessmentProcedureData] ="assessmentProcedureData"  
                [classificationData] ="classificationData"  
                [commonNamesData] ="commonNamesData"  
                [siUnitsData] ="siUnitsData"  
                [distributionCategoryData] ="distributionCategoryData"  
                [productFormData] ="productFormData" 
                [methodOfUseData] ="methodOfUseData"  
                [productAppliedData] = "productAppliedData"
                [pestCideData] ="pestCideData"
                [whoHazardClassData] = "whoHazardClassData"
                [formulationData] ="formulationData"
                [intendedEndUserData] ="intendedEndUserData"  
                [productSubCategoryData] ="productSubCategoryData"  
                [productSpecialCategoryData] ="productSpecialCategoryData"
                [devicesTypeData] ="devicesTypeData" 
                [storageConditionData] ="storageConditionData" 
                [dosageFormsData] ="dosageFormsData" 
                [routeOfAdministrationData] ="routeOfAdministrationData"
                [productCategoryData] ="productCategoryData" 
                [durationDescData] ="durationDescData"
                [productTypeData] ="productTypeData" 
                [confirmDataParam] ="confirmDataParam" 
                [payingCurrencyData] ="payingCurrencyData" 
                [fastTrackOptionsData] ="fastTrackOptionsData" 
                (productTypeEvent)="product_origin_id=$event"
                [zonesData] ="zonesData" [section_id] ="section_id"  [atc_code_id] ="atc_code_id"  [tra_product_id] ="tra_product_id" [reg_product_id] ="reg_product_id"   [isReadOnly] ="isReadOnly" [sub_module_id] ="sub_module_id" [application_code] ="application_code">

              </app-cosmetics-productsdetails>
            </div>
            <div class="col-lg-12 no-padding" *ngIf="prodclass_category_id == 4">
              <app-medicaldevices-productsdetails  
                [productGeneraldetailsfrm] ="productGeneraldetailsfrm"  
                [assessmentProcedureData] ="assessmentProcedureData"  
                [classificationData] ="classificationData"  
                [commonNamesData] ="commonNamesData"  
                [siUnitsData] ="siUnitsData"  
                [distributionCategoryData] ="distributionCategoryData"  
                [productFormData] ="productFormData" 
                [methodOfUseData] ="methodOfUseData"  
                [intendedEndUserData] ="intendedEndUserData"  
                [productSubCategoryData] ="productSubCategoryData"  
                [productSpecialCategoryData] ="productSpecialCategoryData"
                [devicesTypeData] ="devicesTypeData" 
                [storageConditionData] ="storageConditionData" 
                [dosageFormsData] ="dosageFormsData" 
                [routeOfAdministrationData] ="routeOfAdministrationData"
                [productCategoryData] ="productCategoryData" 
                [durationDescData] ="durationDescData"
                [productTypeData] ="productTypeData" 
                [confirmDataParam] ="confirmDataParam" 
                [payingCurrencyData] ="payingCurrencyData" 
                [fastTrackOptionsData] ="fastTrackOptionsData" 
                [gmdnCategoryData] ="gmdnCategoryData" 

                [isReadOnlyTraderasLtr] ="isReadOnlyTraderasLtr" 
                
                [prodclass_category_id] ="prodclass_category_id" 
                (productTypeEvent)="product_origin_id=$event"
                [zonesData] ="zonesData" [section_id] ="section_id"  [tra_product_id] ="tra_product_id" [reg_product_id] ="reg_product_id"   [atc_code_id] ="atc_code_id"  [isReadOnly] ="isReadOnly" [sub_module_id] ="sub_module_id" [application_code] ="application_code">
              </app-medicaldevices-productsdetails>
          </div>

            <div class="col-lg-12 div-footer">
  
              <button type="submit" (click)="onSavedrugWithdrawalProductApplication()"  
                class="btn btn-primary  pull-right" style="margin:5px;"><i class="fa fa-save"></i>&nbsp;Next Reason For Withdrawal</button>
                <button (click)="onProductDashboard()" class="btn btn-primary pull-left" style="margin:5px;" type="button"><i
                  class="fa fa-dashboard"></i>
                &nbsp; Dashboard</button>
            </div>
         
        </wizard-step>
        <wizard-step stepTitle="Reason For Withdrawal" class="wizardStep-height">
          <div class="row wizard-content">
              <app-application-withdrawal-details [section_id] ="section_id"  [section_id] ="section_id"  [module_id] ="module_id" [status_id] ="status_id" [sub_module_id] ="sub_module_id" [application_code] ="application_code">
      
              </app-application-withdrawal-details>

          </div>
          <div style="border-top: 1px solid #ccc; min-height: 100px !important;">
              <button type="button" class="btn btn-primary" previousStep>&nbsp;<i
                  class="fa fa-angle-double-left"></i>Previous
                Previous</button>
              <button type="button" class="btn btn-primary" (click)="funcValidateApplicationWithdrawalDetails(2)">Next Submission &nbsp;<i class="fa fa-angle-double-right"></i></button>
            </div>
      </wizard-step>  
    
        <wizard-step stepTitle="Submission">
            <form [formGroup]="onApplicationSubmissionFrm" class="col-lg-12  div-nopadding" style="background: #fff;" enctype="multipart/form-data" role="form" (ngSubmit)="onProductApplicationSubmit()">
              <div class="col-lg-12">
                  <b><h4>Declaration</h4></b>
                  <ul>
                      <li *ngFor="let guide of terms_conditions;">
                          <p>{{guide.no}} {{guide.term_conditiondetails}}</p>
                      </li>
                  </ul>
              </div>
              <div class="col-lg-4"  *ngIf="sub_module_id === 7 || sub_module_id === 8  || sub_module_id === 9">
                  <label>Fast Track Option Process</label>
                  <dx-select-box [dataSource]="fastTrackOptionsData" valueExpr="id" displayExpr="name"
                    placeholder="Select Fast Track" [searchEnabled]="true" formControlName="is_fast_track">
                  </dx-select-box>
                </div>
                <div class="col-lg-4"  *ngIf="sub_module_id === 7 || sub_module_id === 8  || sub_module_id === 9">
                  <label>Payment Currency(The payment will be based in USD/Tshs)</label>
                  <dx-select-box [dataSource]="payingCurrencyData"  valueExpr="id" displayExpr="name"
                    placeholder="Select Paying Currency" [searchEnabled]="true" formControlName="paying_currency_id">
                  </dx-select-box>
                </div>
              <div class="col-lg-12">
                <dx-check-box text="Agree to the Declaration" [value]="undefined" (onValueChanged)="newProductTermscheckbox($event)">
                </dx-check-box>
              </div>
      
              <div class="wizard-divbottom">
                <button class="btn btn-primary" type="button" previousStep>Previous Step</button>
                <button class="btn btn-primary" type="button" (click)="onDrugsProductsApplicationPrint()">Print Products
                  Details
                  Application</button>
                <button class="btn btn-primary" type="button" [disabled]="!checkProductsSubmission" (click)="onProductApplicationSubmit()">Submit
                  Product Application</button>
              </div>
</form>
        </wizard-step>
      </wizard>
  
    </div>
  </div>
  <dx-popup class="popup" [width]="1050" [height]="450" [showTitle]="true" title="Registered Product Applications" [dragEnabled]="false"
    [closeOnOutsideClick]="true" [(visible)]="isRegisteredProductsWinshow">
    <div *dxTemplate="let data of 'content'" class="row">
        <dx-data-grid class="table row-border hover" [dataSource]="registeredProductsData" keyExpr="id" >
            <dxo-filter-row [visible]="true"></dxo-filter-row>
  
            <dxo-paging [enabled]="true">
            </dxo-paging>
            <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
            </dxo-pager>
  
            <dxo-export [enabled]="true" fileName="registeredProducts" [allowExportSelectedData]="true"></dxo-export>
  
            <dxo-selection mode="multiple"></dxo-selection>
            <dxo-group-panel [visible]="true"></dxo-group-panel>
            
            <dxi-column dataField="brand_name"></dxi-column>
            <dxi-column dataField="common_name"></dxi-column>
            <dxi-column dataField="classification_name"></dxi-column>
            <dxi-column dataField="certificate_no"></dxi-column>
            <dxi-column dataField="expiry_date"></dxi-column>
            <dxi-column dataField="applicant_name" caption="Registrant"></dxi-column>
            <dxi-column dataField="local_agent"></dxi-column>
              <dxi-column caption="Actions" name="command-editing" [allowFiltering]="false" [allowSorting]="false"
              cellTemplate="cellTemplate">
              <div *dxTemplate="let data of 'cellTemplate'">
                  <a (click)="funSelectWithdrawalRegisteredProdcustsApp(data)"><i class="fa fa-edit"></i>Select</a>&nbsp;
                </div>
            </dxi-column>
            
            <dxo-grouping #expand [autoExpandAll]="true"></dxo-grouping>
          </dx-data-grid>
    </div>
  </dx-popup>

  <dx-popup class="popup"  [width]="funcpopWidth(80)" [height]="700" [showTitle]="true" title="{{printReportTitle}}"
  [dragEnabled]="false" [closeOnOutsideClick]="true" [(visible)]="isPrintReportVisible">
  <div *dxTemplate="let data of 'content'">
      <div class="col-lg-12 row" [innerHTML]="printiframeUrl | safe: 'html'"></div>
  </div>
</dx-popup>
