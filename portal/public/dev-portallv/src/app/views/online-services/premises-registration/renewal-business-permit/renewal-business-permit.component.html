<div class="row">
  <div class="col-xl-12">
      <div class="breadcrumb-holder">
          <h1 class="main-title float-left">Process: {{process_title}}</h1>
          <ol class="breadcrumb float-right">
              <li class="breadcrumb-item">Home</li>
              <li class="breadcrumb-item active">Dashboard</li>
              <li class="breadcrumb-item active">Premises Application</li>
          </ol>
          <div class="clearfix"></div>
      </div>
  </div>
</div>
<div style="background: #fff; font-weight: bold;padding:5px;margin-bottom: 5px !important; height: 55px !important;">
  <div class="row">
      <div class="col-lg-4">
          <label style="font-weight: bold;margin: 5px; font-style:italics;font-size: 15px;font-style: italics; color: green;">   Tracking No: <i> {{tracking_no}}</i>   </label>
      </div>
      <div class="col-lg-4">
          <label style="font-weight: bold;margin: 5px; font-style:italics;font-size: 15px;font-style: italics;color: green;">Application Status:<i> {{status_name}}</i> </label>
      </div>

  </div>
</div>
<div class="row">
  <div class="col-lg-12" *ngIf="status_id === 57">
    <wizard [navigationMode]='strict' style="background: #fff !important; height: 100% !important;">
        <wizard-step stepTitle="Request for CAPA Submission(Identified Issues)" class="wizardStep-height">
            <div class="col-lg-12 wizard-content">
                  
                    <div class="accordion" id="CaPaResponsesDiv">

                        <div class="card">
                        <div class="card-headerdefined" id="headingTwo">
                    
                            <button class="btn btn-link " type="button" data-toggle="collapse" data-target="#identified_capa"
                            aria-expanded="false" aria-controls="identified_capa">
                            <i class="fa fa-arrow-down" aria-hidden="true"></i>
                            Request for CAPA Submission(Identified Issues)
                            </button>
                        </div>
                        <div id="identified_capa" class="collapse show" aria-labelledby="headingTwo" data-parent="#CaPaResponsesDiv">
                            <div class="card-body no-padding">
                            <div class="no-padding">
                                <dx-data-grid class="table row-border hover row"  [columnHidingEnabled]="false" [dataSource]="applicationCAPARequestsData" (onToolbarPreparing)="onAppQueryPreparing($event)"
                                [showBorders]="true">
                                    <dxo-filter-row [visible]="false"></dxo-filter-row>
                                    <dxo-load-panel [enabled]="true">
                                    </dxo-load-panel>
                                    <dxo-paging [enabled]="true">
                                    </dxo-paging>
                                    <dxo-selection mode="single"></dxo-selection>
                                    <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[10, 20]" [showNavigationButtons]="true" [showInfo]="true"
                                    infoText="Page #{0}. Total: {1} ({2} items)">
                                    </dxo-pager>
                                    <dxo-search-panel  [visible]="true" 
                                    >
                                    </dxo-search-panel>
                                    <dxi-column   [width] = 120 caption="Reaised On" dataField="added_on"></dxi-column>
                                    <dxi-column name="command-editing"  caption="CAPA Details" [allowFiltering]="false" [allowSorting]="false" cellTemplate="cellTemplate1">
                                        <div *dxTemplate="let data of 'cellTemplate1'">
                                            <div [innerHTML]="data.data.comments"></div>
                                        </div>
                                    </dxi-column> 
                                
                                </dx-data-grid>
                    
                            </div>
                            </div>
                        </div>
                        <div class="card-headerdefined" id="headingThree">
                    
                            <button class="btn btn-link " type="button" data-toggle="collapse" data-target="#CaPaResponsesDocumentsDiv"
                            aria-expanded="false" aria-controls="CaPaResponsesDocumentsDiv">
                            <i class="fa fa-arrow-down" aria-hidden="true"></i>
                            Request for CAPA Documents
                            </button>
                        </div>
                        <div id="CaPaResponsesDocumentsDiv" class="collapse show" aria-labelledby="headingTwo" data-parent="#CaPaResponsesDiv">
                            <div class="card-body no-padding">
                            <div class="no-padding">
                                
                                <app-app-document-preview  [document_type_id]=49 [section_id]="section_id" [module_id]="module_id" [status_id]="status_id" [sub_module_id]="sub_module_id" [premise_type_id]="premise_type_id" [application_code]="application_code"></app-app-document-preview>
                            </div>
                            </div>
                        </div>
                        </div>
                    </div>
        </div>
        <div style="border-top: 1px solid #ccc; min-height: 100px !important;">
            <button (click)="onProductDashboard()" class="btn btn-primary pull-left" style="margin:5px;" type="button"><i
            class="fa fa-dashboard"></i>
            &nbsp; Dashboard</button>
           
            <button type="button" class="btn btn-primary" (click)="funcValidateApplicationQueryresponse(1)" >Next(Document Upload) &nbsp;<i class="fa fa-angle-double-right"></i></button>
        </div>
        </wizard-step>
        <wizard-step stepTitle="Documents" class="wizardStep-height">
            <div class=" wizard-content">
                <app-application-documents [section_id]="section_id" [module_id]="module_id" [status_id]="status_id" [sub_module_id]="sub_module_id" [premise_type_id]="premise_type_id" [application_code]="application_code"></app-application-documents>
            </div>
            <div class="wizard-divbottom">
                <button type="button" class="btn btn-primary" previousStep><i class="fa fa-angle-double-left"></i>Previous</button>
              
                <button type="button" class="btn btn-primary" (click)="funcValidatePremDocumentsUpload(2)">Next Application Submission<i class="fa fa-angle-double-right"></i></button>

            </div>

        </wizard-step>
            <wizard-step stepTitle="CAPA responses Submission">
                    <div class="row" >

                            <div class="col-lg-12">
                                <b><h4>Declaration</h4></b>
                                <ul>
                                    <li *ngFor="let guide of terms_conditions;">
                                        <p>{{guide.no}} {{guide.term_conditiondetails}}</p>
                                    </li>
                                </ul>
                            </div>
                            <div class="col-lg-12">
                                <dx-check-box text="Agree to the Declaration" [value]="undefined" (onValueChanged)="newPremTermscheckbox($event)">
                                </dx-check-box>
                            </div>
                        </div>
        
                <div class="wizard-divbottom">
                  <button class="btn btn-primary" type="button" previousStep>Previous Step</button>
                <!-- <app-invoice-appgeneration  [onApplicationSubmissionFrm] ="onApplicationSubmissionFrm" [module_id] ="module_id"  [status_id] ="status_id" [application_code]="application_code" ></app-invoice-appgeneration>--> 
                                <button class="btn btn-primary" type="button" [disabled]="!checkPremisesSubmission" (click)="onPremisesApplicationSubmit()">Submit Premises
                        Application</button>
                </div>
              </wizard-step>

      </wizard>

</div>
<div class="col-lg-12" *ngIf="status_id === 52">
    <wizard [navigationMode]='strict' style="background: #fff !important; height: 100% !important;">
        <wizard-step stepTitle="Request for Re-Inspection Information(Identified Issues)" class="wizardStep-height">
            <div class="col-lg-12 wizard-content">
                  
                    <div class="accordion" id="ReinspectionResponsesDiv">

                        <div class="card">
                        <div class="card-headerdefined" id="headingTwo">
                    
                            <button class="btn btn-link " type="button" data-toggle="collapse" data-target="#identified_capa"
                            aria-expanded="false" aria-controls="identified_capa">
                            <i class="fa fa-arrow-down" aria-hidden="true"></i>
                            Request for Re-Inspection(Identified Issues)
                            </button>
                        </div>
                        <div id="identified_capa" class="collapse show" aria-labelledby="headingTwo" data-parent="#ReinspectionResponsesDiv">
                            <div class="card-body no-padding">
                            <div class="no-padding">
                                <dx-data-grid class="table row-border hover row"  [columnHidingEnabled]="false" [dataSource]="applicationReinspectionRequestsData" (onToolbarPreparing)="onAppQueryPreparing($event)"
                                [showBorders]="true">
                                    <dxo-filter-row [visible]="false"></dxo-filter-row>
                                    <dxo-load-panel [enabled]="true">
                                    </dxo-load-panel>
                                    <dxo-paging [enabled]="true">
                                    </dxo-paging>
                                    <dxo-selection mode="single"></dxo-selection>
                                    <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[10, 20]" [showNavigationButtons]="true" [showInfo]="true"
                                    infoText="Page #{0}. Total: {1} ({2} items)">
                                    </dxo-pager>
                                    <dxo-search-panel  [visible]="true" 
                                    >
                                    </dxo-search-panel>
                                    <dxi-column   [width] = 120 caption="Reaised On" dataField="added_on"></dxi-column>
                                    <dxi-column name="command-editing"  caption="CAPA Details" [allowFiltering]="false" [allowSorting]="false" cellTemplate="cellTemplate1">
                                        <div *dxTemplate="let data of 'cellTemplate1'">
                                            <div [innerHTML]="data.data.comments"></div>
                                        </div>
                                    </dxi-column> 
                                
                                </dx-data-grid>
                    
                            </div>
                            </div>
                        </div>
                        <div class="card-headerdefined" id="headingThree">
                    
                            <button class="btn btn-link " type="button" data-toggle="collapse" data-target="#ReinspResponsesDocumentsDiv"
                            aria-expanded="false" aria-controls="ReinspResponsesDocumentsDiv">
                            <i class="fa fa-arrow-down" aria-hidden="true"></i>
                            Request for Re-Inspection Information
                            </button>
                        </div>
                        <div id="ReinspResponsesDocumentsDiv" class="collapse show" aria-labelledby="headingTwo" data-parent="#ReinspectionResponsesDiv">
                            <div class="card-body no-padding">
                            <div class="no-padding">
                                
                                <app-app-document-preview  [document_type_id]=53 [section_id]="section_id" [module_id]="module_id" [status_id]="status_id" [sub_module_id]="sub_module_id" [premise_type_id]="premise_type_id" [application_code]="application_code"></app-app-document-preview>
                            </div>
                            </div>
                        </div>
                        </div>
                    </div>
        </div>
        <div style="border-top: 1px solid #ccc; min-height: 100px !important;">
            <button (click)="onProductDashboard()" class="btn btn-primary pull-left" style="margin:5px;" type="button"><i
            class="fa fa-dashboard"></i>
            &nbsp; Dashboard</button>
           
            <button type="button" class="btn btn-primary" (click)="funcValidateApplicationQueryresponse(1)" >Next(Document Upload) &nbsp;<i class="fa fa-angle-double-right"></i></button>
        </div>
        </wizard-step>
        <wizard-step stepTitle="Documents" class="wizardStep-height">
            <div class=" wizard-content">
                <app-application-documents [section_id]="section_id" [module_id]="module_id" [status_id]="status_id" [sub_module_id]="sub_module_id" [premise_type_id]="premise_type_id" [application_code]="application_code"></app-application-documents>
            </div>
            <div class="wizard-divbottom">
                <button type="button" class="btn btn-primary" previousStep><i class="fa fa-angle-double-left"></i>Previous</button>
              
                <button type="button" class="btn btn-primary" (click)="funcValidatePremDocumentsUpload(2)">Next Application Submission<i class="fa fa-angle-double-right"></i></button>
            </div>
        </wizard-step>
            <wizard-step stepTitle="Re-Inspection Request Response Submission">
                    <div class="row" >

                            <div class="col-lg-12">
                                <b><h4>Declaration</h4></b>
                                <ul>
                                    <li *ngFor="let guide of terms_conditions;">
                                        <p>{{guide.no}} {{guide.term_conditiondetails}}</p>
                                    </li>
                                </ul>
                            </div>
                            <div class="col-lg-12">
                                <dx-check-box text="Agree to the Declaration" [value]="undefined" (onValueChanged)="newPremTermscheckbox($event)">
                                </dx-check-box>
                            </div>
                        </div>
        
                <div class="wizard-divbottom">
                  <button class="btn btn-primary" type="button" previousStep>Previous Step</button>
                  <app-invoice-appgeneration  [onApplicationSubmissionFrm] ="onApplicationSubmissionFrm" [module_id] ="module_id"  [status_id] ="status_id" [application_code]="application_code"  [app_routing]="app_routing"></app-invoice-appgeneration>
                                <button class="btn btn-primary" type="button" [disabled]="!checkPremisesSubmission" (click)="onPremisesApplicationSubmit()">Submit Premises
                        Application</button>
                </div>
              </wizard-step>

      </wizard>

</div>

  <div class="col-lg-12" *ngIf="status_id === 6 || status_id === 7 || status_id === 8 || status_id === 9">
    <wizard [navigationMode]='strict' style="background: #fff !important; height: 100% !important;">
      <wizard-step stepTitle="Application Queries" class="wizardStep-height">
        <div class="col-lg-12 wizard-content">
                      
            <dx-data-grid class="table row-border hover row"  [columnHidingEnabled]="false" [dataSource]="applicationPreckingQueriesData" (onToolbarPreparing)="onProdAppQueryPreparing($event)"
            [showBorders]="true">
            <dxo-filter-row [visible]="false"></dxo-filter-row>
            <dxo-load-panel [enabled]="true">
            </dxo-load-panel>
            <dxo-paging [enabled]="true">
            </dxo-paging>
            <dxo-selection mode="single"></dxo-selection>
            <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[10, 20]" [showNavigationButtons]="true" [showInfo]="true"
              infoText="Page #{0}. Total: {1} ({2} items)">
            </dxo-pager>
            <dxo-search-panel  [visible]="true" 
              >
            </dxo-search-panel>
            <dxo-export [enabled]="true" fileName="Query Details" [allowExportSelectedData]="true"></dxo-export>
            <dxi-column [width]="350" caption="Action" name="command-editing" [allowFiltering]="false" [allowSorting]="false"
                cellTemplate="cellTemplate">
                <div *dxTemplate="let data of 'cellTemplate'">
                    <dx-button text="Query Response" (click)="funcInitQueryResponse(data)"
                    type="success" icon="edit" [elementAttr]="{ class: 'btn btn-primary' }">
                  </dx-button>
                  <a (click)="funcDownloadQueryLetter(data)" class="action-btn"><i class="fa fa-download"></i>DownLoad Query Letter</a>&nbsp;
              </div>
            </dxi-column>
            <dxi-column   [width] = 120 caption="Queried On" dataField="added_on"></dxi-column>
            
            <dxi-column name="command-editing"  caption="Query Details" [allowFiltering]="false" [allowSorting]="false" cellTemplate="cellTemplate1">
                <div *dxTemplate="let data of 'cellTemplate1'">
                    <div [innerHTML]="data.data.queries_remarks"></div>
                </div>
            </dxi-column> 
            <dxi-column name="command-editing"  caption="Query Response" [allowFiltering]="false" [allowSorting]="false" cellTemplate="cellTemplate2">
                <div *dxTemplate="let data of 'cellTemplate2'">
                    <div [innerHTML]="data.data.response_txt"></div>
                </div>
            </dxi-column> 
           
        </dx-data-grid>
      </div>
      <div style="border-top: 1px solid #ccc; min-height: 100px !important;">
          <button (click)="onProductDashboard()" class="btn btn-primary pull-left" style="margin:5px;" type="button"><i
            class="fa fa-dashboard"></i>
          &nbsp; Dashboard</button>
        <button type="button" class="btn btn-primary" (click)="funcValidateApplicationQueryresponse(1)" >Next(Query Responses) &nbsp;<i class="fa fa-angle-double-right"></i></button>
      </div>
</wizard-step>
            <wizard-step stepTitle="Query Response Submission">
                    <div class="row" >

                            <div class="col-lg-12">
                                <b><h4>Declaration</h4></b>
                                <ul>
                                    <li *ngFor="let guide of terms_conditions;">
                                        <p>{{guide.no}} {{guide.term_conditiondetails}}</p>
                                    </li>
                                </ul>
                            </div>
                            <div class="col-lg-12">
                                <dx-check-box text="Agree to the Declaration" [value]="undefined" (onValueChanged)="newPremTermscheckbox($event)">
                                </dx-check-box>
                            </div>
                        </div>
        
                <div class="wizard-divbottom">
                  <button class="btn btn-primary" type="button" previousStep>Previous Step</button>
                  <button class="btn btn-primary" type="button" (click)="onPremisesApplicationPrint()">Print Premises
                        Application</button>
                                <button class="btn btn-primary" type="button" [disabled]="!checkPremisesSubmission" (click)="onPremisesApplicationSubmit()">Submit Premises
                        Application</button>
                </div>
              </wizard-step>

      </wizard>

</div>
     
  <div class="col-lg-12"  *ngIf="(status_id != 7 && status_id !== 8 && status_id !== 6 && status_id !== 9) &&  (status_id != 52 && status_id != 52)">
     <wizard  style="background: #fff !important; height: 100% !important;" navigationMode="strict" navBarLayout ="large-filled-symbols">
      
      <wizard-step stepTitle="Premises Application Details" navigationSymbol="Step 1" class="wizardStep-height">
                <app-premises-generaldetails  [premisesGeneraldetailsfrm] ="premisesGeneraldetailsfrm"  
                [sectionsData] ="sectionsData"  
                [premisesTypeData] ="premisesTypeData"  
                [countries] ="countries"  
                [regions] ="regions"
                [classificationData] ="classificationData"
                [districts] ="districts"  
                [businessTypesData] ="businessTypesData"
                [businessScaleData] ="businessScaleData"  
                [businessCategoryData] ="businessCategoryData"  
                [zoneData] ="zoneData"  
                [isCancelled]="isCancelled"
                [isConvicted]="isConvicted"
                [confirmDataParam] ="confirmDataParam"
                [sub_module_id] ="sub_module_id" 
                [module_id] ="module_id" 
                [application_code] ="application_code"
                [tra_premise_id] ="tra_premise_id" 
                [registered_id] ="registered_id"
                [isReadOnlyTraderasContact] ="isReadOnlyTraderasContact" 
                [premisesGeneraldetailsfrm] ="premisesGeneraldetailsfrm" 
                [payingCurrencyData] ="payingCurrencyData" 
                [fastTrackOptionsData] ="fastTrackOptionsData" 
                [newPremisesPersonnelDetailsFrm] ="newPremisesPersonnelDetailsFrm"
                (businessTypeEvent)="business_type_id=$event"
                [is_readonly] ="is_readonly"
                 >
  
                </app-premises-generaldetails>
          <div style="border-top: 1px solid #ccc; min-height: 100px !important;">
            <button (click)="onPremisesDashboard()" class="btn btn-primary pull-left" style="margin:5px;" type="button"><i
                class="fa fa-dashboard"></i>
              &nbsp; Dashboard</button>
           
            <button type="submit" (click)="onSavePremisesApplication()" 
              class="btn btn-primary  pull-right" style="margin:5px;"><i class="fa fa-save"></i>&nbsp;Save and Submit Renewal Request</button>
          </div>
      
      </wizard-step>

       <wizard-step stepTitle="Premises Other Details"   navigationSymbol="Step 2" class="wizardStep-height">
            <div class="accordion" id="premisesInfo" >
                <div class="card" >
                    <div class="card-headerdefined" id="headingTwo">
                        <button class="btn btn-link " type="button" 
                            data-toggle="collapse" data-target="#premises_otherdetails"
                             aria-expanded="false" aria-controls="premises_otherdetails">
                             Premises Directors Details
                        </button>
                    </div>
                    <div id="premises_otherdetails" class="collapse show" 
                    aria-labelledby="headingTwo" data-parent="#premisesInfo">
                    <div class="card-body no-padding">
                        <div class="no-padding">
                            <app-directors-details 
                                [premisesDirectorsDetailsfrm] ="premisesDirectorsDetailsfrm"  
                                [newPremisesDirectorsDetailsFrm] ="newPremisesDirectorsDetailsFrm"  
                                [premDirectorsDetailsData] ="premDirectorsDetailsData"  
                                [isBusinessPersonnelPopupVisible] ="isBusinessPersonnelPopupVisible"  
                                [qualificationsData] ="qualificationsData"  
                                [personnelPositionData] ="personnelPositionData"  
                                [studyFieldsData] ="studyFieldsData"  
                                [personnel_informationData] ="personnel_informationData"  
                                [isaddNewPremisesDirectorsDetails] ="isaddNewPremisesDirectorsDetails"  
                                [is_readonly] ="is_readonly"  
                                [premise_id] ="premise_id"
                                [sub_module_id] ="sub_module_id"   
                                [premisesGeneraldetailsfrm] ="premisesGeneraldetailsfrm"  
                                >
                             </app-directors-details>          
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-headerdefined" id="headingTwo">
                      <button class="btn btn-link " type="button" 
                        data-toggle="collapse" data-target="#premises_staffdetails"
                        aria-expanded="false" aria-controls="premises_staffdetails">
                        Premises Staff Details
                      </button>
                    </div>
                    <div id="premises_staffdetails" class="collapse show" 
                        aria-labelledby="headingTwo" data-parent="#premisesInfo">
                        <div class="card-body no-padding">
                            <div class="no-padding">
                                <app-premises-staffdetails  
                                [premisesStafflDetailsfrm] ="premisesStafflDetailsfrm"  
                                [newPremisesStafflDetailsfrm] ="newPremisesStafflDetailsfrm"  
                                [premPersonnelDetailsData] ="premPersonnelDetailsData" 
                                [countries] ="countries"
                                [sub_module_id] ="sub_module_id"   
                                [regions] ="regions"  
                                [districts] ="districts" 
                                [isBusinessPersonnelPopupVisible] ="isBusinessPersonnelPopupVisible"  
                                [qualificationsData] ="qualificationsData"  
                                [personnelPositionData] ="personnelPositionData"  
                                [studyFieldsData] ="studyFieldsData"  
                                [personnel_informationData] ="personnel_informationData"  
                                [isaddNewPremisesPersonnelDetails] ="isaddNewPremisesPersonnelDetails"  
              
                                [is_readonly] ="is_readonly"  

                                [premise_id] ="premise_id"  
                                [premisesGeneraldetailsfrm] ="premisesGeneraldetailsfrm"  
                                >
                                </app-premises-staffdetails>
                                      
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-headerdefined" id="headingThree">
                        <button class="btn btn-link " type="button" 
                            data-toggle="collapse"  data-target="#premises_storelocationdetails"
                            aria-expanded="false" aria-controls="premises_storelocationdetails">
                            Nearest Pharmacy Location Details
                        </button>
                    </div>
                    <div id="premises_storelocationdetails" class="collapse show" 
                        aria-labelledby="headingThree" data-parent="#premisesInfo">
                        <div class="card-body no-padding">
                            <div class="no-padding">
                                <app-premises-storeslocation
                                [premisesStoreslocationFrm] ="premisesStoreslocationFrm"  
                                [countries] ="countries"
                                [premisesStoreLocationDetailsData]="premisesStoreLocationDetailsData"
                                [regions] ="regions"     
                                [premise_id] ="premise_id"
                                [isLocationPopupVisible]="isLocationPopupVisible"  
                                [districts] ="districts"  
                                [is_readonly] ="is_readonly">
                                </app-premises-storeslocation>
                            </div>
                        </div>
                     </div>
                </div>
                    
            </div>
        </div>  
        <div style="border-top: 1px solid #ccc; min-height: 100px !important;">
            <button type="button" class="btn btn-primary" previousStep>&nbsp;<i class="fa fa-angle-double-left"></i>Previous Premises Information</button>
            <button type="button" class="btn btn-primary" (click)="funcValidatePremBusinessDetails(2+initWizardPanel)">Next Premises Documents Details &nbsp;<i class="fa fa-angle-double-right"></i></button>
        </div>
    </wizard-step>
    <wizard-step stepTitle="Documents"  navigationSymbol="Step 3"  class="wizardStep-height">
        <div class=" wizard-content">
            <app-application-documents [section_id]="section_id" [module_id]="module_id" [status_id]="status_id" [sub_module_id]="sub_module_id" [application_code]="application_code"></app-application-documents>
        </div>
        <div class="wizard-divbottom">
            <button type="button" class="btn btn-primary" previousStep><i class="fa fa-angle-double-left"></i>Previous Premises Application Details</button>
    <button type="button" class="btn btn-primary" (click)="funcValidatePremDocumentsUpload(3)">Next Application Submission<i class="fa fa-angle-double-right"></i></button> 

        </div>

    </wizard-step>
      <wizard-step stepTitle="Completion & Submission"  navigationSymbol="Submission" >
          <form [formGroup]="onApplicationSubmissionFrm" class="col-lg-12  div-nopadding" style="background: #fff;" enctype="multipart/form-data" role="form" (ngSubmit)="onPremisesApplicationSubmit()">
            <div class="col-lg-12">
                <b><h4>Declaration and Diclaimer</h4></b>
                <ul>
                    <li *ngFor="let guide of terms_conditions;">
                        <p>{{guide.no}} {{guide.term_conditiondetails}}</p>
                    </li>
                </ul>
            </div>
            
            <div class="col-lg-12">
              <dx-check-box text="Agree to the Declaration" [value]="undefined" (onValueChanged)="newPremTermscheckbox($event)">
              </dx-check-box>
            </div>
    
            <div class="wizard-divbottom">
              <button class="btn btn-primary" type="button" previousStep>Previous Step</button>
                
                <app-invoice-appgeneration  [onApplicationSubmissionFrm] ="onApplicationSubmissionFrm" [module_id] ="module_id"  [status_id] ="status_id" [application_code]="application_code" ></app-invoice-appgeneration>

              <button class="btn btn-primary" type="button" [disabled]="!checkPremisesSubmission" (click)="onPremisesApplicationSubmit()">Submit
                 Application</button>
            </div>
</form>
      </wizard-step>
    </wizard>
  </div>
</div>
<!--Upload POP Up -->
<dx-popup class="popup"  [width]="funcpopWidth(40)" height="auto" [showTitle]="true" title="Premises Registration Documents Upload" [dragEnabled]="false" [closeOnOutsideClick]="true" [(visible)]="isDocumentUploadPopupVisible">
  <div *dxTemplate="let data of 'content'">
      <form role="form" class="row" enctype="multipart/form-data" role="form" [formGroup]="premisesDocumentUploadfrm" (ngSubmit)="onpremisesDocumentUpload()">
          <div class="col-lg-12">
              <label>Document Requirement</label>
              <dx-select-box [dataSource]="premDocumentsUploadRequirement" valueExpr="document_requirement_id" displayExpr="document_requirement" placeholder="Select Document Upload" [searchEnabled]="true" formControlName="document_requirement_id">

              </dx-select-box>
          </div>

          <div class="col-lg-12">
              <label>File Upload</label>
              <input type="file" (change)="onFileChange($event)" placeholder="Upload Premises Document" />
          </div>
          <div class="col-lg-12">
              <label>Description</label>
              <dx-text-area [height]="60" formControlName="description" placeholder="Description" [(value)]="value">
              </dx-text-area>
          </div>
          <input type="hidden" formControlName="id" />
          <input type="hidden" formControlName="node_ref" />
          <div class="col-lg-12">
              <dx-button text="Upload Premises Document" [disabled]="!premisesDocumentUploadfrm.valid" (onClick)="onpremisesDocumentUpload()" type="success" icon="save" [elementAttr]="{ class: 'btn btn-primary; pull-right' }">
              </dx-button>
          </div>
      </form>
  </div>
</dx-popup>
<!-- personnel documetn -->

<ng-http-loader spinner="sk-wave"></ng-http-loader>


<dx-popup class="popup"  [width]="funcpopWidth(75)" height="auto" [showTitle]="true" title="Document Preview" [dragEnabled]="false" [closeOnOutsideClick]="true" [(visible)]="isDocumentPreviewDownloadwin">
  <div *dxTemplate="let data of 'content'" class="row">
      <iframe [src]="document_previewurl" class="col-lg-12" height="650"></iframe>

  </div>

</dx-popup>

<dx-popup class="popup"  [width]="funcpopWidth(60)" height="auto" [showTitle]="true" title="Documents Version Preview" [dragEnabled]="false" [closeOnOutsideClick]="true" [(visible)]="isDocumentVersionPreviewDownloadwin">
  <div *dxTemplate="let data of 'content'" class="row">
      <dx-data-grid class="table row-border hover" [dataSource]="premDocumentsVersionsUploadData" keyExpr="id" (onToolbarPreparing)="onPremisesDocumentToolbar($event)">
          <dxo-filter-row [visible]="true"></dxo-filter-row>

          <dxo-paging [enabled]="true">
          </dxo-paging>
          <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
          </dxo-pager>
          <dxo-export [enabled]="true" fileName="premDocumentsVersionUploadData" [allowExportSelectedData]="true"></dxo-export>

          <dxo-selection mode="multiple"></dxo-selection>
          <dxo-group-panel [visible]="true"></dxo-group-panel>
          <dxi-column dataField="name"></dxi-column>
          <dxi-column dataField="nodeType"></dxi-column>
          <dxi-column dataField="node_ref"></dxi-column>
          <dxi-column dataField="modifiedAt"></dxi-column>
          <dxi-column [width]="160" caption="Action" name="command-editing" [allowFiltering]="false" [allowSorting]="false" cellTemplate="cellTemplate">
              <div *dxTemplate="let data of 'cellTemplate'">

                  <dx-menu (onItemClick)="premDocumentsActionColClick($event,data)" [items]="documentVersionMenuItems"></dx-menu>

              </div>
          </dxi-column>

          <dxo-grouping #expand [autoExpandAll]="true"></dxo-grouping>
      </dx-data-grid>

  </div>

</dx-popup>



<dx-popup  class="popup"  [width]="funcpopWidth(80)" [height]="600" [showTitle]="true" title="Application Registration Query Response"
    [dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="isInitalQueryResponseFrmVisible">
    <div *dxTemplate="let data of 'content'">
      <dx-scroll-view>
      <wizard [navigationMode]='strict' style="background: #fff !important; height: 100% !important;">
        <wizard-step stepTitle="Product Application Queries" class="wizardStep-height">
          <div class="col-lg-12 wizard-content">
            <form role="form" class="row" style="background:#fff;" enctype="multipart/form-data" role="form" 
              [formGroup]="initqueryresponsefrm"
              (ngSubmit)="onSaveinitqueryresponse()">
              <div class="col-lg-12">
                <label>Query</label>
                <dx-html-editor [height]="200" readOnly ="true"  formControlName="queries_remarks"  
                  placeholder="Query">
                    <dxo-toolbar>
                      <dxi-item formatName="separator"></dxi-item>
                      <dxi-item formatName="size" [formatValues]="['8pt', '10pt', '12pt', '14pt', '18pt', '24pt', '36pt']"></dxi-item>
                      <dxi-item formatName="font" [formatValues]="['Arial', 'Courier New', 'Georgia', 'Impact', 'Lucida Console', 'Tahoma', 'Times New Roman', 'Verdana']"></dxi-item>
                      <dxi-item formatName="separator"></dxi-item>
                      <dxi-item formatName="bold"></dxi-item>
                      <dxi-item formatName="italic"></dxi-item>
                      <dxi-item formatName="header" [formatValues]="[false, 1, 2, 3, 4, 5]"></dxi-item>
                      <dxi-item formatName="separator"></dxi-item>
                      <dxi-item formatName="orderedList"></dxi-item>
                      <dxi-item formatName="bulletList"></dxi-item>
                      <dxi-item formatName="separator"></dxi-item>
                      <dxi-item formatName="color"></dxi-item>
                      <dxi-item formatName="link"></dxi-item>
                      <dxi-item formatName="image"></dxi-item>
                      <dxi-item formatName="separator"></dxi-item>
                      <dxi-item formatName="clear"></dxi-item>
                    </dxo-toolbar>
                    <dxo-media-resizing
                        [enabled]=true>
                    </dxo-media-resizing>   
                </dx-html-editor>
              </div>
              <div class="col-lg-12">
                <label>Query Response</label>
                <dx-html-editor [height]="200" formControlName="response_txt"  placeholder="Query Response">
                  <dxo-toolbar>
                    <dxi-item formatName="separator"></dxi-item>
                    <dxi-item formatName="size" [formatValues]="['8pt', '10pt', '12pt', '14pt', '18pt', '24pt', '36pt']"></dxi-item>
                    <dxi-item formatName="font" [formatValues]="['Arial', 'Courier New', 'Georgia', 'Impact', 'Lucida Console', 'Tahoma', 'Times New Roman', 'Verdana']"></dxi-item>
                    <dxi-item formatName="separator"></dxi-item>
                    <dxi-item formatName="bold"></dxi-item>
                    <dxi-item formatName="italic"></dxi-item>
                    <dxi-item formatName="header" [formatValues]="[false, 1, 2, 3, 4, 5]"></dxi-item>
                    <dxi-item formatName="separator"></dxi-item>
                    <dxi-item formatName="orderedList"></dxi-item>
                    <dxi-item formatName="bulletList"></dxi-item>
                    <dxi-item formatName="separator"></dxi-item>
                    <dxi-item formatName="color"></dxi-item>
                    <dxi-item formatName="link"></dxi-item>
                    <dxi-item formatName="image"></dxi-item>
                    <dxi-item formatName="separator"></dxi-item>
                    <dxi-item formatName="clear"></dxi-item>
                  </dxo-toolbar>
                  <dxo-media-resizing
                    [enabled]=true>
                  </dxo-media-resizing> 
                </dx-html-editor>
              </div>
                <input type="hidden" formControlName="id"/>
                <input type="hidden" formControlName="query_id"/>
            </form>
          </div>
          <div style="border-top: 1px solid #ccc; min-height: 100px !important;">
            <dx-button text="Save Response" [disabled]="!initqueryresponsefrm.valid" (onClick)="onSaveinitqueryresponse()"
              type="success" icon="save" [elementAttr]="{ class: 'btn btn-primary; pull-right' }">
            </dx-button>
            <button type="button"  [disabled]="!initqueryresponsefrm.valid"  class="btn btn-primary  pull-right" nextStep>Next(Query Responses) &nbsp;<i class="fa fa-angle-double-right"></i></button>
            <dx-button text="Download Query Letter" (onClick)="funcDownloadUploadedDoc()" type="success" icon="download" [elementAttr]="{ class:'btn btn-primary; pull-right'}">
            </dx-button>
          </div>
        </wizard-step>
         <wizard-step stepTitle="Premises Application Details" navigationSymbol="Step 1" class="wizardStep-height">
                <app-premises-generaldetails  [premisesGeneraldetailsfrm] ="premisesGeneraldetailsfrm"  
                [sectionsData] ="sectionsData"  
                [premisesTypeData] ="premisesTypeData"  
                [countries] ="countries"  
                [regions] ="regions"
                [classificationData] ="classificationData"
                [districts] ="districts"  
                [businessTypesData] ="businessTypesData"
                [businessScaleData] ="businessScaleData"  
                [businessCategoryData] ="businessCategoryData"  
                [zoneData] ="zoneData"  
                [isCancelled]="isCancelled"
                [isConvicted]="isConvicted"
                [confirmDataParam] ="confirmDataParam"
                [sub_module_id] ="sub_module_id" 
                [module_id] ="module_id" 
                [application_code] ="application_code"
                [tra_premise_id] ="tra_premise_id" 
                [registered_id] ="registered_id"
                [isReadOnlyTraderasContact] ="isReadOnlyTraderasContact" 
                [premisesGeneraldetailsfrm] ="premisesGeneraldetailsfrm" 
                [payingCurrencyData] ="payingCurrencyData" 
                [fastTrackOptionsData] ="fastTrackOptionsData" 
                [newPremisesPersonnelDetailsFrm] ="newPremisesPersonnelDetailsFrm"
                (businessTypeEvent)="business_type_id=$event"
                [is_readonly] ="is_readonly"
                 >
  
                </app-premises-generaldetails>
          <div style="border-top: 1px solid #ccc; min-height: 100px !important;">
            <button (click)="onPremisesDashboard()" class="btn btn-primary pull-left" style="margin:5px;" type="button"><i
                class="fa fa-dashboard"></i>
              &nbsp; Dashboard</button>
           
            <button type="submit" (click)="onSavePremisesApplication()" 
              class="btn btn-primary  pull-right" style="margin:5px;"><i class="fa fa-save"></i>&nbsp;Save and Submit Renewal Request</button>
          </div>
      
      </wizard-step>

       <wizard-step stepTitle="Premises Other Details"   navigationSymbol="Step 2" class="wizardStep-height">
            <div class="accordion" id="premisesInfo" >
                <div class="card" >
                    <div class="card-headerdefined" id="headingTwo">
                        <button class="btn btn-link " type="button" 
                            data-toggle="collapse" data-target="#premises_otherdetails"
                             aria-expanded="false" aria-controls="premises_otherdetails">
                             Premises Directors Details
                        </button>
                    </div>
                    <div id="premises_otherdetails" class="collapse show" 
                    aria-labelledby="headingTwo" data-parent="#premisesInfo">
                    <div class="card-body no-padding">
                        <div class="no-padding">
                            <app-directors-details 
                                [premisesDirectorsDetailsfrm] ="premisesDirectorsDetailsfrm"  
                                [newPremisesDirectorsDetailsFrm] ="newPremisesDirectorsDetailsFrm"  
                                [premDirectorsDetailsData] ="premDirectorsDetailsData"  
                                [isBusinessPersonnelPopupVisible] ="isBusinessPersonnelPopupVisible"  
                                [qualificationsData] ="qualificationsData"  
                                [personnelPositionData] ="personnelPositionData"  
                                [studyFieldsData] ="studyFieldsData"  
                                [personnel_informationData] ="personnel_informationData"  
                                [isaddNewPremisesDirectorsDetails] ="isaddNewPremisesDirectorsDetails"  
                                [is_readonly] ="is_readonly"  
                                [premise_id] ="premise_id"
                                [sub_module_id] ="sub_module_id"   
                                [premisesGeneraldetailsfrm] ="premisesGeneraldetailsfrm"  
                                >
                             </app-directors-details>          
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-headerdefined" id="headingTwo">
                      <button class="btn btn-link " type="button" 
                        data-toggle="collapse" data-target="#premises_staffdetails"
                        aria-expanded="false" aria-controls="premises_staffdetails">
                        Premises Staff Details
                      </button>
                    </div>
                    <div id="premises_staffdetails" class="collapse show" 
                        aria-labelledby="headingTwo" data-parent="#premisesInfo">
                        <div class="card-body no-padding">
                            <div class="no-padding">
                                <app-premises-staffdetails  
                                [premisesStafflDetailsfrm] ="premisesStafflDetailsfrm"  
                                [newPremisesStafflDetailsfrm] ="newPremisesStafflDetailsfrm"  
                                [premPersonnelDetailsData] ="premPersonnelDetailsData" 
                                [countries] ="countries"
                                [sub_module_id] ="sub_module_id"   
                                [regions] ="regions"  
                                [districts] ="districts" 
                                [isBusinessPersonnelPopupVisible] ="isBusinessPersonnelPopupVisible"  
                                [qualificationsData] ="qualificationsData"  
                                [personnelPositionData] ="personnelPositionData"  
                                [studyFieldsData] ="studyFieldsData"  
                                [personnel_informationData] ="personnel_informationData"  
                                [isaddNewPremisesPersonnelDetails] ="isaddNewPremisesPersonnelDetails"  
              
                                [is_readonly] ="is_readonly"  

                                [premise_id] ="premise_id"  
                                [premisesGeneraldetailsfrm] ="premisesGeneraldetailsfrm"  
                                >
                                </app-premises-staffdetails>
                                      
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-headerdefined" id="headingThree">
                        <button class="btn btn-link " type="button" 
                            data-toggle="collapse"  data-target="#premises_storelocationdetails"
                            aria-expanded="false" aria-controls="premises_storelocationdetails">
                            Nearest Pharmacy Location Details
                        </button>
                    </div>
                    <div id="premises_storelocationdetails" class="collapse show" 
                        aria-labelledby="headingThree" data-parent="#premisesInfo">
                        <div class="card-body no-padding">
                            <div class="no-padding">
                                <app-premises-storeslocation
                                [premisesStoreslocationFrm] ="premisesStoreslocationFrm"  
                                [countries] ="countries"
                                [premisesStoreLocationDetailsData]="premisesStoreLocationDetailsData"
                                [regions] ="regions"     
                                [premise_id] ="premise_id"
                                [isLocationPopupVisible]="isLocationPopupVisible"  
                                [districts] ="districts"  
                                [is_readonly] ="is_readonly">
                                </app-premises-storeslocation>
                            </div>
                        </div>
                     </div>
                </div> 
            </div>
        </div>  
          <div class="wizard-divbottom">
            <button type="button" class="btn btn-primary" previousStep>&nbsp;<i class="fa fa-angle-double-left"></i>Previous Details</button>
            <button type="button" class="btn btn-primary" nextStep>Next Documents<i class="fa fa-angle-double-right"></i></button>
          </div>
        </wizard-step>
        <wizard-step stepTitle="Documents" class="wizardStep-height">
          <div class=" wizard-content">
            <app-application-documents [section_id]="section_id" [module_id]="module_id" [status_id]="status_id" [premise_type_id]="premise_type_id"  [sub_module_id]="sub_module_id" [application_code]="application_code">
            </app-application-documents>
          </div>
          <div class="wizard-divbottom">
            <button type="button" class="btn btn-primary" previousStep><i class="fa fa-angle-double-left"></i>Previous Drug Shop Documents
            </button>
            <button type="button" class="btn btn-primary" (click)="funcCloseQueryWindow()">Close<i class="fa fa-angle-double-right"></i>
            </button>
          </div>
        </wizard-step>
      </wizard>
    </dx-scroll-view>
  </div>
</dx-popup>