<div class="row account-details">
  <div class="col-lg-2 ">
    <h5>Account Guidelines</h5>
    <ul>
      <li>All the information must be field for approval.</li>
    </ul>
  </div>
  <div class="col-lg-10 guidelines-section">

    <form enctype="multipart/form-data" role="form" [formGroup]="createAccountFrm" (ngSubmit)="onCreateAccount()">
      <wizard>
        <wizard-step stepTitle="Account Information" class="wizardStep-height">
          <dx-scroll-view height="400px">
          <div class="row">
            <div class="col-xs-12 col-md-6 col-lg-6 col-xl-4">
              <label class="control-label">Account Type</label>
              <dx-select-box [dataSource]="accountTypesData" valueExpr="id" displayExpr="name" placeholder="Select Account Type"
                 [searchEnabled]="true" formControlName="traderaccount_type_id">
              </dx-select-box>
            </div>
            <div class="col-xs-12 col-md-6 col-lg-6 col-xl-4">
              <label for="ti" class="control-label">Email Address</label>
              <dx-text-box (onFocusOut)="onValidateAccountEmail($event)"  (onValueChanged) = 'onEmailValueChange($event)' formControlName="email_address" placeholder="Email Address">
              </dx-text-box>
            </div>
            <div class="col-xs-12 col-md-6 col-lg-6 col-xl-4">

              <label class="control-label">Customer Name</label>
              <dx-text-box formControlName="name" placeholder="Customer Name">
              </dx-text-box>
            </div>
            <div class="col-xs-12 col-md-6 col-lg-6 col-xl-4">
              <label class="control-label">Country</label>

              <dx-select-box [dataSource]="countries" valueExpr="id" displayExpr="name" placeholder="Select Country"
                (onSelectionChanged)="onCoutryCboSelect($event)" [searchEnabled]="true" formControlName="country_id">
              </dx-select-box>
            </div>
           
            <div class="col-xs-12 col-md-6 col-lg-6 col-xl-4  input-group">
                <div class="col-lg-8">
                    <label for="ti" class="control-label">Province/Region/City</label>

                    <dx-select-box [dataSource]="regions" valueExpr="id" displayExpr="name" (onSelectionChanged)="onRegionsCboSelect($event)"
                      [searchEnabled]="true" formControlName="region_id">
                    </dx-select-box>

                </div>
                <div class="col-lg-4">
                    <dx-button
                    text="Add Province"
                    type="success"
                    icon="fa fa-plus"
                    [elementAttr]="{  class: 'pull-left' }"
                    (onClick)="OnAddNewManufacturerReionDetails()">
                </dx-button>
                </div>

            </div>


            <div class="col-xs-12 col-md-6 col-lg-6 col-xl-4">
              <label for="ti" class="control-label">District(Optional)</label>

              <dx-select-box [dataSource]="districts" valueExpr="id" placeholder="Select District" displayExpr="name"
                [searchEnabled]="true" formControlName="district_id">
              </dx-select-box>
            </div>

            <div class="col-xs-12 col-md-6 col-lg-6 col-xl-4">
              <label for="ti" class="control-label">Postal Address</label>
              <dx-text-box formControlName="postal_address" placeholder="Postal Address">
              </dx-text-box>
            </div>
            <div class="col-xs-12 col-md-6 col-lg-6 col-xl-4">
              <label for="ti" class="control-label">Telephone No</label>

              <dx-text-box formControlName="telephone_no" placeholder="Telephone No">
              </dx-text-box>
            </div>
            
            <div class="col-lg-12">
                <label class="control-label">Physical Address</label>
  
                <dx-text-area [height]="60" formControlName="physical_address" placeholder="Physical Address">
                </dx-text-area>
              </div>
          
          <!--
            <div class="col-lg-12">
              <ngx-recaptcha2 #captchaElem
                [siteKey]="siteKey"
                
                (success)="handleSuccess($event)"
                [useGlobalDomain]="false"
                
                formControlName="recaptcha">
              </ngx-recaptcha2>
            
            </div>-->

          </div>
          <div class="col-lg-12 no-padding">
            <a class="btn btn-danger pull-left" style="margin:5px;" routerLink="./../"><i class="fa fa-arrow-left"></i>
              &nbsp;Back to Login</a>
            <!--[disabled]="!createAccountFrm.valid" 
            <button class="btn btn-primary pull-right" style="margin:5px;"  [disabled]="!createAccountFrm.valid" (click)="onMoveNextWizard(1)" type="button"
              awNextStep><i class="fa fa-angle-double-right"></i>
              &nbsp;Next Applications Information</button>-->

              <div class="col-lg-12 btn-margin-5">

                    <dx-button
                      text="Submit Account Registration Details"
                      type="success"
                      icon="fa fa-right"
                      [disabled]="!createAccountFrm.valid"
                      [elementAttr]="{ id: 'elementId', class: 'pull-right' }"
                      (onClick)="onCreateAccount()">
                  </dx-button>
              </div>
          </div>
        </dx-scroll-view>
        </wizard-step>
        <!--
        <wizard-step stepTitle="Application Registration Details " class="wizardStep-height">
          <div class="col-lg-12 no-padding">
            <dx-data-grid class="table row-border hover" (onToolbarPreparing)="functDataGridToolbar($event)"
              [dataSource]="traderApplicationInformationDta" keyExpr="id">
              <dxo-filter-row [visible]="false"></dxo-filter-row>
              <dxo-search-panel [visible]="true">
              </dxo-search-panel>
              <dxo-paging [enabled]="true">
              </dxo-paging>
              <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
              </dxo-pager>
              <dxo-export [enabled]="true" fileName="Notification" [allowExportSelectedData]="true"></dxo-export>
              <dxo-selection mode="multiple"></dxo-selection>
              <dxo-group-panel [visible]="true"></dxo-group-panel>
              <dxi-column dataField="application_type"></dxi-column>
              <dxi-column dataField="registration_no"></dxi-column>
              <dxi-column dataField="reference_no"></dxi-column>
              <dxi-column dataField="year_of_registration"></dxi-column>
              <dxi-column dataField="year_of_submission"></dxi-column>
              <dxi-column dataField="remarks"></dxi-column>

            </dx-data-grid>

          </div>
          
        </wizard-step>
-->
      </wizard>

    </form>

    <ngx-smart-modal #createAccountModal identifier="createAccountModal" customClass="nsm-dialog-animation-btt medium-modal"
      [dismissable]="false" [closable]="false">
      <h4>Trader Account Information</h4>
      <h6>{{message}}</h6>
      <h5 *ngIf="trader_no">Account No: {{trader_no}}</h5>
      <button (click)="oncloseRegistrationMdl()">Close</button>
    </ngx-smart-modal>
  </div>
</div>

<dx-popup [width]="450" [closeOnOutsideClick]="false" [height]="550" class="popup" [showTitle]="true" title="Trader Application Information"
  [dragEnabled]="false" [closeOnOutsideClick]="true" [(visible)]="application_modalVisible">

  <div *dxTemplate="let data of 'content'">
    <form enctype="multipart/form-data" role="form" [formGroup]="applicationInformationFrm" (ngSubmit)='onSaveTradersApplicationInformation()'>
      <div class="row no-padding">
        <div class="col-xl-12">
          <label class="control-label">Application Type</label>

          <dx-select-box [dataSource]="applicationTypesData" valueExpr="id" displayExpr="name" placeholder="Select Application Type"
            [searchEnabled]="true" formControlName="module_id">
          </dx-select-box>
        </div>
        <div class="col-xl-12">
          <label class="control-label">Registration No</label>

          <dx-text-box formControlName="registration_no" placeholder="Registration No">
          </dx-text-box>
        </div>
        <div class="col-xl-12">
          <label class="control-label">Reference No</label>

          <dx-text-box formControlName="reference_no" placeholder="Reference No">
          </dx-text-box>
        </div>
        <div class="col-xl-12">
          <label class="control-label">Year of registration</label>

          <dx-text-box formControlName="year_of_registration" placeholder="Year Of Registration">
          </dx-text-box>
        </div>
        <div class="col-xl-12">
          <label class="control-label">Remarks</label>
          <dx-text-area [height]="60" formControlName="remarks" [maxLength]="maxLength" placeholder="Remarks" [(value)]="value">
          </dx-text-area>

        </div>
      </div>
      <div class="col-lg-12">
        <button type="submit" (submit)="onSaveTradersApplicationInformation()" [disabled]="!applicationInformationFrm.valid"
          class="btn btn-primary pull-right"><i class="fa fa-save"></i> Save Application Information</button>

      </div>
    </form>
  </div>
</dx-popup><ng-http-loader spinner="sk-wave" [filteredMethods]="['POST', 'PuT','GET']"></ng-http-loader>

<dx-popup class="popup"  [width]="funcpopWidth(40)" [height]="400" [showTitle]="true" title="Region Name" [dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="addRegionDetailsWin">
  
    <div *dxTemplate="let data of 'content'" >
          <form [formGroup]="addRegionDetailsFrm" class="col-lg-12  div-nopadding" style="background: #fff;" enctype="multipart/form-data" role="form" (ngSubmit)="onSaveRegiondetails()">
              <div class="col-lg-12">
                <label class="control-label">Region Name</label>
                <dx-text-box formControlName="name" placeholder="name" [showClearButton]="true">
                </dx-text-box>
              </div>
              
              <input type='hidden' formControlName="country_id"/>
              <input type='hidden' value = 'par_regions' formControlName="tablename"/>

              <div class="col-lg-12">
                  <dx-button
                      text="Add New Region"
                      type="success"
                      icon="fa fa-plus"
                      [elementAttr]="{  class: 'pull-left' }"
                      (onClick)="onSaveRegiondetails()">
                  </dx-button>
                </div>
            </form>
    </div>
</dx-popup>
